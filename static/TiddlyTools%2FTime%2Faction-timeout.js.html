<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.2.5" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="format-detection" content="telephone=no">
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="static.css">
<title>TiddlyTools/Time/action-timeout.js:  Neotw üéâ
 ‚Äî A modern notebook based on TiddlyWiki5
</title>
</head>
<body class="tc-body">

<section class="tc-story-river tc-static-story-river">
<p><div class="tc-tiddler-frame tc-tiddler-view-frame tc-tiddler-exists " data-tags="" data-tiddler-title="TiddlyTools/Time/action-timeout.js" role="article">







  
  <div class="gk0wk-notionpagebg gk0wk-notionpagebg-n">
    <div class="gk0wk-notionbg-addbuttons">
      <button class="" title="Add Cover"><svg class="tc-image-picture tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M112 68.233v-48.23A4.001 4.001 0 00107.997 16H20.003A4.001 4.001 0 0016 20.003v38.31l9.241-14.593c2.8-4.422 9.023-5.008 12.6-1.186l18.247 20.613 13.687-6.407a8 8 0 018.903 1.492 264.97 264.97 0 002.92 2.739 249.44 249.44 0 006.798 6.066 166.5 166.5 0 002.106 1.778c2.108 1.747 3.967 3.188 5.482 4.237.748.518 1.383.92 2.044 1.33.444.117 1.046.144 1.809.05 1.873-.233 4.238-1.144 6.723-2.547a36.016 36.016 0 003.205-2.044c.558-.4.93-.686 1.07-.802.376-.31.765-.577 1.165-.806zM0 8.007A8.01 8.01 0 018.007 0h111.986A8.01 8.01 0 01128 8.007v111.986a8.01 8.01 0 01-8.007 8.007H8.007A8.01 8.01 0 010 119.993V8.007zM95 42a8 8 0 100-16 8 8 0 000 16zM32 76c15.859 4.83 20.035 7.244 20.035 12S32 95.471 32 102.347c0 6.876 1.285 4.99 1.285 9.653H68s-13.685-6.625-13.685-10.8c0-7.665 10.615-8.34 10.615-13.2 0-7.357-14.078-8.833-32.93-12z" fill-rule="evenodd"></path></svg> Add Cover</button>
    </div>
  </div>









<div class="tc-tiddler-title"><div class="tc-titlebar"><span class="tc-tiddler-controls"><button aria-label="trashbin" class="tc-btn-invisible tc-btn-%24%3A%2Fplugins%2Fkookma%2Ftrashbin%2Fui%2Ftoolbar-button" title="Move this tiddler to Trashbin"> 


























</button><button aria-expanded="false" aria-label="more" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fmore-tiddler-actions" title="More actions"></button><div class=" tc-reveal" hidden="true"></div><button aria-label="favorites" class="tc-btn-invisible tc-btn-%24%3A%2Fplugins%2Fkookma%2Ffavorites%2Fui%2Fbuttons%2Fadd-remove" title="Add to favorites">
     
		 

		 
 </button><button aria-label="close others" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fclose-others" title="Close other tiddlers"></button><span class=" tc-reveal"><button aria-label="fold tiddler" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Ffold" title="Fold the body of this tiddler"></button></span><span class=" tc-reveal" hidden="true"></span><button aria-label="edit" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fedit" title="Edit this tiddler"></button><button class="tc-btn-invisible tc-btn-%24%3A%2Fplugins%2Foeyoews%2Fneotw%2Fui%2Fcopy-code" title="copy current code"></button><button class="tc-btn-invisible tc-btn-%24%3A%2Fplugins%2Foeyoews%2Fneotw%2Fui%2Fcopy-title" title="copy current title"></button><button aria-label="close" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fclose" title="Close this tiddler"></button></span><a class="tc-tiddlylink tc-tiddlylink-resolves" href="TiddlyTools%252FTime%252Faction-timeout.js.html"><h2 class="tc-title">TiddlyTools/Time/action-timeout.js</h2></a></div><div class="tc-tiddler-info tc-popup-handle tc-reveal" hidden="true"></div></div><div class="tc-reveal"></div>

<button aria-expanded="false" class="gk0wk-backlinksbox-title" title="Show backlinks"><svg class="tc-image-link tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><g fill-rule="evenodd"><path d="M42.263 69.38a31.919 31.919 0 006.841 10.13c12.5 12.5 32.758 12.496 45.255 0l22.627-22.628c12.502-12.501 12.497-32.758 0-45.255-12.5-12.5-32.758-12.496-45.254 0L49.104 34.255a32.333 32.333 0 00-2.666 3.019 36.156 36.156 0 0121.94.334l14.663-14.663c6.25-6.25 16.382-6.254 22.632-.004 6.248 6.249 6.254 16.373-.004 22.631l-22.62 22.62c-6.25 6.25-16.381 6.254-22.631.004a15.93 15.93 0 01-4.428-8.433 11.948 11.948 0 00-7.59 3.48l-6.137 6.137z"></path><path d="M86.35 59.234a31.919 31.919 0 00-6.84-10.13c-12.5-12.5-32.758-12.497-45.255 0L11.627 71.732c-12.501 12.5-12.496 32.758 0 45.254 12.5 12.5 32.758 12.497 45.255 0L79.51 94.36a32.333 32.333 0 002.665-3.02 36.156 36.156 0 01-21.94-.333l-14.663 14.663c-6.25 6.25-16.381 6.253-22.63.004-6.25-6.249-6.255-16.374.003-22.632l22.62-22.62c6.25-6.25 16.381-6.253 22.631-.003a15.93 15.93 0 014.428 8.432 11.948 11.948 0 007.59-3.48l6.137-6.136z"></path></g></svg>¬†<strong>1 backlink<span class=" tc-reveal" hidden="true"></span></strong></button>
<div class="tc-popup-keep gk0wk-backlinksbox-box tc-reveal" hidden="true"></div>


<div class=" tc-reveal">
<div class="tc-subtitle">


üëâ created ¬†2015/07/28¬†¬†


üìù modified ¬†8 months ago¬†¬†



<label class="tc-checkbox "><input type="checkbox"><span></span></label>



<select title="status" value="public">
&lt;/$set&gt;
  <option value="private">private</option>
  <option value="no">hide</option>
  <option value="public">public</option>
</select>

</div>
</div>
<div class="tc-tags-wrapper">
  
  
</div>




<div class="tc-tiddler-body tc-reveal"><pre class="hljs"><code class="javascript hljs"><span class="hljs-comment">/*\
title: action-timeout.js
type: application/javascript
module-type: widget
author: Eric Shulman elsdesign@gmail.com
revision: 1.6

$action-timeout invokes actions once after a specified delay, or repeatedly at a specified interval.
The timeoutID can be saved to a tiddler and used later to cancel an active timeout or interval.

\*/</span>

(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){
<span class="hljs-comment">/*jslint node: true, browser: true */</span>
<span class="hljs-comment">/*global $tw: false */</span>
<span class="hljs-meta">&quot;use strict&quot;</span>;
<span class="hljs-keyword">var</span> <span class="hljs-title class_">Widget</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;$:/core/modules/widgets/widget.js&quot;</span>).<span class="hljs-property">widget</span>;
<span class="hljs-keyword">var</span> <span class="hljs-title class_">TimeoutWidget</span>= <span class="hljs-keyword">function</span>(<span class="hljs-params">parseTreeNode,options</span>) {
	<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initialise</span>(parseTreeNode,options);
};
<span class="hljs-title class_">TimeoutWidget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Widget</span>();
<span class="hljs-title class_">TimeoutWidget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">render</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">parent,nextSibling</span>) {
	<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">computeAttributes</span>();
	<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">execute</span>();
};
<span class="hljs-title class_">TimeoutWidget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">execute</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
	<span class="hljs-variable language_">this</span>.<span class="hljs-property">tid</span>       = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&quot;tid&quot;</span>,     <span class="hljs-string">&quot;&quot;</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">field</span>     = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&quot;field&quot;</span>,   <span class="hljs-string">&quot;text&quot;</span>);
	<span class="hljs-variable language_">this</span>.<span class="hljs-property">clear</span>     = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&quot;clear&quot;</span>,   <span class="hljs-string">&quot;&quot;</span>);
	<span class="hljs-variable language_">this</span>.<span class="hljs-property">delay</span>     = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&quot;delay&quot;</span>,   <span class="hljs-string">&quot;&quot;</span>);
	<span class="hljs-variable language_">this</span>.<span class="hljs-property">interval</span>  = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&quot;interval&quot;</span>,<span class="hljs-string">&quot;&quot;</span>);
	<span class="hljs-variable language_">this</span>.<span class="hljs-property">actions</span>   = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&quot;actions&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);
	<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&quot;autostart&quot;</span>)) <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">invokeAction</span>();
};
<span class="hljs-title class_">TimeoutWidget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">refresh</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">changedTiddlers</span>) {
	<span class="hljs-keyword">var</span> changedAttributes = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">computeAttributes</span>();
	<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(changedAttributes).<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">refreshSelf</span>(); <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; }
	<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">refreshChildren</span>(changedTiddlers);
};
<span class="hljs-title class_">TimeoutWidget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">allowActionPropagation</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) { <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; };
<span class="hljs-title class_">TimeoutWidget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">invokeAction</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">triggeringWidget,event</span>) {
    <span class="hljs-keyword">var</span> id;
	<span class="hljs-keyword">var</span> self=<span class="hljs-variable language_">this</span>;
	<span class="hljs-keyword">if</span> (self.<span class="hljs-property">clear</span>)     { self.<span class="hljs-title function_">invokeActionString</span>(self.<span class="hljs-property">actions</span>,self,event); <span class="hljs-keyword">return</span> <span class="hljs-built_in">clearTimeout</span>(self.<span class="hljs-property">clear</span>); }
	<span class="hljs-keyword">if</span> (self.<span class="hljs-property">delay</span>)     { id=<span class="hljs-built_in">setTimeout</span>( <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) { self.<span class="hljs-title function_">invokeActionString</span>(self.<span class="hljs-property">actions</span>,self,event); }, self.<span class="hljs-property">delay</span>); }
	<span class="hljs-keyword">if</span> (self.<span class="hljs-property">interval</span>)  { id=<span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) { self.<span class="hljs-title function_">invokeActionString</span>(self.<span class="hljs-property">actions</span>,self,event); }, self.<span class="hljs-property">interval</span>); }
	<span class="hljs-keyword">if</span> (self.<span class="hljs-property">tid</span> &amp;&amp; id) { $tw.<span class="hljs-property">wiki</span>.<span class="hljs-title function_">setText</span>(self.<span class="hljs-property">tid</span>,self.<span class="hljs-property">field</span>,<span class="hljs-literal">null</span>,id.<span class="hljs-title function_">toString</span>()); }
	<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// Action was invoked</span>
};
<span class="hljs-built_in">exports</span>[<span class="hljs-string">&quot;action-timeout&quot;</span>] = <span class="hljs-title class_">TimeoutWidget</span>;
})();</code></pre></div>
<div class=" tc-reveal">

</div>
  <div style="text-align: right">
    
    
        
          <span class=" tc-reveal">
              <button class="tc-btn-invisible giscus-footer">
                
                <svg fill="" height="1em" stroke="" stroke-width="0" t="1569682881658" version="1.1" viewBox="0 0 1024 1024" width="1em" xmlns="http://www.w3.org/2000/svg"><defs></defs><path d="M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zM293 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"></path><path d="M894 345c-48.1-66-115.3-110.1-189-130v0.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l0.8 132.6c0 3.2 0.5 6.4 1.5 9.4 5.3 16.9 23.3 26.2 40.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-0.5 0.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102z m505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-0.2-0.1C613.7 788.2 680.7 742.2 729 676c76.4-105.3 88.8-237.6 44.4-350.4l0.6 0.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z"></path><path d="M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"></path></svg>

                
                
                  Show Comments
                
                
                
              </button>
          </span>
          <span class=" tc-reveal" hidden="true"></span>
        
     
  </div>


<br>

</div></p>
</section>
</body>
</html>

