{"title":"$:/plugins/oeyoews/tiddlywiki-daylight","description":"Tiddlywiki Daylight","author":"oeyoews","version":"0.2.1","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"Tiddlywiki Daylight","dependents":"$:/plugins/oeyoews/tiddlywiki-tailwindcss-plus $:/plugins/oeyoews/neotw-swal2 $:/plugins/oeyoews/neotw-back-to-top","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/tiddlywiki-daylight/readme\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-daylight/readme\",\"text\":\"!! Tiddlywiki Daylight\\n\\n> 主流的经典三模式切换(浅色模式, 深色模式, 系统模式)\\n\\n> 提供了daylight widget\\n\\n> 右键点击图标查看配置\\n\\n<$daylight btn class=\\\"rounded-full p-2 hover:scale-105 transition\\\"/>\\n\\n```wiki\\n<$daylight btn class=\\\"rounded-full p-2 hover:scale-105 transition\\\"/>\\n```\\n\\n!! TODO\\n\\n* 添加配置UI: 模拟shiraz的两种 palette 选择, $:/plugins/kookma/shiraz/ui/set-dark-light-palette\\n* 去除插件依赖: nprogress, tailwindcss, overwrite template\\n* 添加过渡动画: https://antfu.me/posts\\n* palette 是如何修改x-tiddler-dictionary\\n\\n> darkmode 写起来不难，但是如果想要写得很完备， 细节真的不少(darmode.js是一个简单的库，不过不具备很好的扩展性)\\n\\n<!-- darkmode.js 大概是重写了body.bg, 带有动画 -->\\n\"},\"$:/plugins/oeyoews/tiddlywiki-daylight/dark\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-daylight/dark\",\"text\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><g fill=\\\"currentColor\\\" fill-opacity=\\\"0\\\"><path d=\\\"m15.22 6.03l2.53-1.94L14.56 4L13.5 1l-1.06 3l-3.19.09l2.53 1.94l-.91 3.06l2.63-1.81l2.63 1.81z\\\"><animate id=\\\"lineMdMoonRisingLoop0\\\" fill=\\\"freeze\\\" attributeName=\\\"fill-opacity\\\" begin=\\\"0.7s;lineMdMoonRisingLoop0.begin+6s\\\" dur=\\\"0.4s\\\" values=\\\"0;1\\\"/><animate fill=\\\"freeze\\\" attributeName=\\\"fill-opacity\\\" begin=\\\"lineMdMoonRisingLoop0.begin+2.2s\\\" dur=\\\"0.4s\\\" values=\\\"1;0\\\"/></path><path d=\\\"M13.61 5.25L15.25 4l-2.06-.05L12.5 2l-.69 1.95L9.75 4l1.64 1.25l-.59 1.98l1.7-1.17l1.7 1.17z\\\"><animate fill=\\\"freeze\\\" attributeName=\\\"fill-opacity\\\" begin=\\\"lineMdMoonRisingLoop0.begin+3s\\\" dur=\\\"0.4s\\\" values=\\\"0;1\\\"/><animate fill=\\\"freeze\\\" attributeName=\\\"fill-opacity\\\" begin=\\\"lineMdMoonRisingLoop0.begin+5.2s\\\" dur=\\\"0.4s\\\" values=\\\"1;0\\\"/></path><path d=\\\"M19.61 12.25L21.25 11l-2.06-.05L18.5 9l-.69 1.95l-2.06.05l1.64 1.25l-.59 1.98l1.7-1.17l1.7 1.17z\\\"><animate fill=\\\"freeze\\\" attributeName=\\\"fill-opacity\\\" begin=\\\"lineMdMoonRisingLoop0.begin+0.4s\\\" dur=\\\"0.4s\\\" values=\\\"0;1\\\"/><animate fill=\\\"freeze\\\" attributeName=\\\"fill-opacity\\\" begin=\\\"lineMdMoonRisingLoop0.begin+2.8s\\\" dur=\\\"0.4s\\\" values=\\\"1;0\\\"/></path><path d=\\\"m20.828 9.731l1.876-1.439l-2.366-.067L19.552 6l-.786 2.225l-2.366.067l1.876 1.439L17.601 12l1.951-1.342L21.503 12z\\\"><animate fill=\\\"freeze\\\" attributeName=\\\"fill-opacity\\\" begin=\\\"lineMdMoonRisingLoop0.begin+3.4s\\\" dur=\\\"0.4s\\\" values=\\\"0;1\\\"/><animate fill=\\\"freeze\\\" attributeName=\\\"fill-opacity\\\" begin=\\\"lineMdMoonRisingLoop0.begin+5.6s\\\" dur=\\\"0.4s\\\" values=\\\"1;0\\\"/></path></g><path fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"2\\\" d=\\\"M7 6 C7 12.08 11.92 17 18 17 C18.53 17 19.05 16.96 19.56 16.89 C17.95 19.36 15.17 21 12 21 C7.03 21 3 16.97 3 12 C3 8.83 4.64 6.05 7.11 4.44 C7.04 4.95 7 5.47 7 6 Z\\\" transform=\\\"translate(0 22)\\\"><animateMotion fill=\\\"freeze\\\" calcMode=\\\"linear\\\" dur=\\\"0.6s\\\" path=\\\"M0 0v-22\\\"/></path></svg>\",\"type\":\"image/svg+xml\"},\"$:/plugins/oeyoews/tiddlywiki-daylight/icon\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-daylight/icon\",\"text\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"36\\\" height=\\\"36\\\" viewBox=\\\"0 0 36 36\\\"><path fill=\\\"#FFD983\\\" d=\\\"M18 0v36C8.059 36 0 27.941 0 18S8.059 0 18 0z\\\"/><path fill=\\\"#66757F\\\" d=\\\"M36 18c0 9.941-8.059 18-18 18V0c9.941 0 18 8.059 18 18z\\\"/><circle cx=\\\"10.5\\\" cy=\\\"8.5\\\" r=\\\"3.5\\\" fill=\\\"#FFCC4D\\\"/><circle cx=\\\"24\\\" cy=\\\"16\\\" r=\\\"3\\\" fill=\\\"#5B6876\\\"/><circle cx=\\\"22.5\\\" cy=\\\"27.5\\\" r=\\\"3.5\\\" fill=\\\"#5B6876\\\"/><circle cx=\\\"21\\\" cy=\\\"6\\\" r=\\\"2\\\" fill=\\\"#5B6876\\\"/><circle cx=\\\"3\\\" cy=\\\"18\\\" r=\\\"1\\\" fill=\\\"#FFCC4D\\\"/><circle cx=\\\"30\\\" cy=\\\"9\\\" r=\\\"1\\\" fill=\\\"#5B6876\\\"/><circle cx=\\\"15\\\" cy=\\\"31\\\" r=\\\"1\\\" fill=\\\"#FFCC4D\\\"/><circle cx=\\\"32\\\" cy=\\\"19\\\" r=\\\"2\\\" fill=\\\"#5B6876\\\"/><circle cx=\\\"10\\\" cy=\\\"23\\\" r=\\\"2\\\" fill=\\\"#FFCC4D\\\"/></svg>\",\"type\":\"image/svg+xml\"},\"$:/plugins/oeyoews/tiddlywiki-daylight/light\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-daylight/light\",\"text\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><g fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-linecap=\\\"round\\\" stroke-width=\\\"2\\\"><circle cx=\\\"12\\\" cy=\\\"32\\\" r=\\\"5\\\"><animate fill=\\\"freeze\\\" attributeName=\\\"cy\\\" dur=\\\"0.6s\\\" values=\\\"32;12\\\"/></circle><g stroke-dasharray=\\\"2\\\" stroke-dashoffset=\\\"2\\\"><path d=\\\"M0 0\\\"><animate fill=\\\"freeze\\\" attributeName=\\\"d\\\" begin=\\\"0.7s\\\" dur=\\\"0.2s\\\" values=\\\"M12 19v1M19 12h1M12 5v-1M5 12h-1;M12 21v1M21 12h1M12 3v-1M3 12h-1\\\"/><animate fill=\\\"freeze\\\" attributeName=\\\"stroke-dashoffset\\\" begin=\\\"0.7s\\\" dur=\\\"0.2s\\\" values=\\\"2;0\\\"/></path><path d=\\\"M0 0\\\"><animate fill=\\\"freeze\\\" attributeName=\\\"d\\\" begin=\\\"0.9s\\\" dur=\\\"0.2s\\\" values=\\\"M17 17l0.5 0.5M17 7l0.5 -0.5M7 7l-0.5 -0.5M7 17l-0.5 0.5;M18.5 18.5l0.5 0.5M18.5 5.5l0.5 -0.5M5.5 5.5l-0.5 -0.5M5.5 18.5l-0.5 0.5\\\"/><animate fill=\\\"freeze\\\" attributeName=\\\"stroke-dashoffset\\\" begin=\\\"0.9s\\\" dur=\\\"0.2s\\\" values=\\\"2;0\\\"/></path><animateTransform attributeName=\\\"transform\\\" dur=\\\"30s\\\" repeatCount=\\\"indefinite\\\" type=\\\"rotate\\\" values=\\\"0 12 12;360 12 12\\\"/></g></g></svg>\",\"type\":\"image/svg+xml\"},\"$:/plugins/oeyoews/tiddlywiki-daylight/system\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-daylight/system\",\"text\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><g fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"2\\\"><path stroke-dasharray=\\\"6\\\" stroke-dashoffset=\\\"6\\\" d=\\\"M12 21H17M12 21H7\\\"><animate fill=\\\"freeze\\\" attributeName=\\\"stroke-dashoffset\\\" dur=\\\"0.3s\\\" values=\\\"6;0\\\"/></path><path stroke-dasharray=\\\"6\\\" stroke-dashoffset=\\\"6\\\" d=\\\"M12 21V17\\\"><animate fill=\\\"freeze\\\" attributeName=\\\"stroke-dashoffset\\\" dur=\\\"0.2s\\\" values=\\\"6;0\\\"/></path><path stroke-dasharray=\\\"64\\\" stroke-dashoffset=\\\"64\\\" d=\\\"M12 17H3V5H21V17Z\\\"><animate fill=\\\"freeze\\\" attributeName=\\\"stroke-dashoffset\\\" begin=\\\"0.3s\\\" dur=\\\"0.6s\\\" values=\\\"64;0\\\"/></path></g></svg>\"},\"$:/plugins/oeyoews/tiddlywiki-daylight/config\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-daylight/config\",\"type\":\"application/x-tiddler-dictionary\",\"class\":\"o-tm\",\"mask-closable\":\"yes\",\"text\":\"lightPalette: $:/themes/nico/notebook/palettes/palette-beige\\ndarkPalette: $:/palettes/GithubDark\\n\"},\"$:/plugins/oeyoews/tiddlywiki-daylight/daylight-listener.js\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-daylight/daylight-listener.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/tiddlywiki-daylight/daylight-listener.js\\ntype: application/javascript\\nmodule-type: library\\n\\nDaylight Listener Module\\n\\\\*/\\n\\n// 注意: 手动切换和自动切换要共享状态,与此同时还要遵循用户的配置\\n\\nconst config = $tw.wiki.getTiddlerData(\\n  '$:/plugins/oeyoews/tiddlywiki-daylight/config',\\n);\\n\\nconst { darkPalette, lightPalette } = config;\\n\\nconst listmode = ['system', 'light', 'dark'];\\n// 放置用户手动修改该数值\\nif (!listmode.includes(localStorage.theme)) {\\n  localStorage.theme = 'system';\\n}\\n\\n// 需要浏览器和操作系统支持\\nconst mediaQuery = window.matchMedia?.('(prefers-color-scheme: dark)');\\n// 后续使用 isDarkmode 存储最新的模式, $:/info/darkmode 有一个listener, 会自动更新, 但是使用yes/no\\n// let isDarkMode = $tw.wiki.getTiddlerText('$:/info/darkmode') === 'yes'; // or mediaQuery.matches\\nlet isDarkMode = mediaQuery.matches;\\n\\n/**\\n * @param {string} mode 获取需要切换到的模式\\n * @param {boolean} isSaveMode 是否保存到localStorage\\n */\\nfunction updateMode(mode, isSaveMode = true) {\\n  // support storage share\\n  mode = mode === 'null' ? 'system' : mode;\\n  if (!listmode.includes(mode)) return;\\n  // BUG: 如果使用switch 会将里面的情况都过一遍， 有问题\\n  document.documentElement.classList.remove('light', 'dark');\\n  let nextMode,\\n    nextPalette = null;\\n\\n  if (mode === 'system') {\\n    nextMode = mediaQuery.matches ? 'dark' : 'light';\\n  }\\n\\n  document.documentElement.classList.add(nextMode || mode);\\n\\n  const nextPaletteMode = nextMode || mode;\\n\\n  nextPalette = nextPaletteMode === 'light' ? lightPalette : darkPalette;\\n\\n  $tw.wiki.setText('$:/palette', 'text', null, nextPalette);\\n  // change event dont need storage\\n  if (isSaveMode) {\\n    localStorage.theme = nextMode ? 'system' : mode;\\n  }\\n}\\n\\n// TODO: 切换system/dark/light 配置, 并且刷新theme, 配置存在store里面\\nconst NProgress = require('nprogress.min.js'); // This step may cause an error due to plugin loading order; NProgress might not be loaded yet, so manual loading is needed.\\n\\nfunction toggleMode() {\\n  NProgress?.start();\\n\\n  /* if (hasSystemMode) {\\n    listmode.push('system');\\n  } */\\n\\n  // 获取下一个模式light/dark/system\\n  const nextMode =\\n    listmode[(listmode.indexOf(localStorage.theme) + 1) % listmode.length];\\n  updateMode(nextMode);\\n  NProgress?.done();\\n}\\n\\nfunction preset() {\\n  const systemMode = isDarkMode ? 'dark' : 'light';\\n  const mode =\\n    localStorage.theme === 'system' ? systemMode : localStorage.theme;\\n  updateMode(mode, false);\\n}\\n\\nfunction checkModeListener() {\\n  preset(mediaQuery);\\n  mediaQuery?.addEventListener?.('change', () => {\\n    const systemMode = mediaQuery.matches ? 'dark' : 'light';\\n    if (localStorage.theme === 'system') {\\n      updateMode(systemMode, false);\\n    }\\n  });\\n\\n  // 共享数据\\n  window.addEventListener('storage', function (event) {\\n    if (event.key === 'theme') {\\n      const newTheme = event.newValue;\\n      // 发送消息给其他页面\\n      window.postMessage(\\n        {\\n          type: 'localStorageUpdate',\\n          key: 'theme',\\n          value: newTheme,\\n        },\\n        '*',\\n      );\\n      if (event.oldValue !== newTheme) {\\n        updateMode(newTheme);\\n      }\\n    }\\n  });\\n}\\n\\nmodule.exports = {\\n  checkModeListener,\\n  toggleMode,\\n};\\n\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/tiddlywiki-daylight/widget.js\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-daylight/widget.js\",\"text\":\"/*\\\\\\r\\ntitle: $:/plugins/oeyoews/tiddlywiki-daylight/widget.js\\r\\ntype: application/javascript\\r\\nmodule-type: widget\\r\\n\\r\\n\\\\*/\\r\\n(function () {\\r\\n  /*jslint node: true, browser: true */\\r\\n  /*global $tw: false */\\r\\n  'use strict';\\r\\n\\r\\n  const Widget = require('$:/core/modules/widgets/widget.js').widget;\\r\\n\\r\\n  class DaylightWidget extends Widget {\\r\\n    constructor(parseTreeNode, options) {\\r\\n      super(parseTreeNode, options);\\r\\n    }\\r\\n\\r\\n    render(parent, nextSibling) {\\r\\n      if (!$tw.browser) return;\\r\\n\\r\\n      const { toggleMode } = require('./daylight-listener');\\r\\n\\r\\n      this.parentDomNode = parent;\\r\\n      this.computeAttributes();\\r\\n      this.execute();\\r\\n\\r\\n      const createElement = $tw.utils.domMaker;\\r\\n      const wiki = $tw.wiki;\\r\\n\\r\\n      const getIcon = (mode) =>\\r\\n        wiki.getTiddlerText('$:/plugins/oeyoews/tiddlywiki-daylight/' + mode);\\r\\n\\r\\n      const { btn, class: classNames } = this.attributes;\\r\\n\\r\\n      // NOTE: 由于require不会多次加载, 所以如果这个节点是require过来的, 永远不会被刷新\\r\\n      function createThemeSpan(theme) {\\r\\n        const storageTheme = localStorage.theme || 'system';\\r\\n\\r\\n        const icon = getIcon(theme);\\r\\n        const spanNode = createElement('span', {\\r\\n          class: storageTheme === theme ? '' : 'hidden',\\r\\n        });\\r\\n        spanNode.innerHTML = icon;\\r\\n        return spanNode;\\r\\n      }\\r\\n\\r\\n      const lightNode = createThemeSpan('light');\\r\\n      const darkNode = createThemeSpan('dark');\\r\\n      const systemNode = createThemeSpan('system');\\r\\n\\r\\n      const domNode = createElement('button', {\\r\\n        class: 'bg-transparent m-0 p-0',\\r\\n        children: [systemNode, lightNode, darkNode],\\r\\n      });\\r\\n\\r\\n      btn && domNode.classList.remove('bg-transparent');\\r\\n      btn && domNode.classList.add('aspect-square');\\r\\n      classNames && domNode.classList.add(...classNames.split(' '));\\r\\n\\r\\n      domNode.addEventListener('click', () => {\\r\\n        toggleMode();\\r\\n        this.refreshSelf();\\r\\n      });\\r\\n\\r\\n      // 仅仅刷新ui, 不更新配置\\r\\n      window.addEventListener('storage', (event) => {\\r\\n        if (event.oldValue !== event.newValue) {\\r\\n          if (['system', 'light', 'dark'].includes(event.newValue)) {\\r\\n            this.refreshSelf();\\r\\n          }\\r\\n        }\\r\\n      });\\r\\n\\r\\n      // 右键配置palette\\r\\n      domNode.addEventListener('contextmenu', (e) => {\\r\\n        e.preventDefault();\\r\\n        $tw.modal.display('$:/plugins/oeyoews/tiddlywiki-daylight/config');\\r\\n      });\\r\\n\\r\\n      /* const mediaQuery = window.matchMedia?.('(prefers-color-scheme: dark)');\\r\\n      mediaQuery?.addEventListener?.('change', () => {\\r\\n        // TODO: 由于change不会修改配置, 所以class没有变化， ui也没有变化\\r\\n        this.refreshSelf();\\r\\n      }); */\\r\\n\\r\\n      parent.insertBefore(domNode, nextSibling);\\r\\n      this.domNodes.push(domNode);\\r\\n    }\\r\\n\\r\\n    // TODO: when changes listener is triggered, widget dont refresh, because it also is config\\r\\n    // tailwindcss example: 如果是system, 直接删除了localStorage.theme\\r\\n    refresh() {\\r\\n      return false;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  exports.daylight = DaylightWidget;\\r\\n})();\",\"type\":\"application/javascript\",\"module-type\":\"widget\"},\"$:/core/ui/ViewTemplate/body\":{\"title\":\"$:/core/ui/ViewTemplate/body\",\"tags\":\"$:/tags/ViewTemplate\",\"text\":\"\\\\import [all[shadows+tiddlers]tag[$:/tags/Macro/View/Body]!has[draft.of]]\\n\\n<$list filter=\\\"[all[current]is[system]]\\\">\\r\\n<$reveal tag=\\\"div\\\" class=\\\"tc-tiddler-body\\\" type=\\\"nomatch\\\" stateTitle=<<folded-state>> text=\\\"hide\\\" retain=\\\"yes\\\" animate=\\\"yes\\\">\\n\\n<$transclude tiddler={{{ [<currentTiddler>] :cascade[all[shadows+tiddlers]tag[$:/tags/ViewTemplateBodyFilter]!is[draft]get[text]] :and[!is[blank]else[$:/core/ui/ViewTemplate/body/default]] }}} />\\n\\n</$reveal>\\r\\n</$list>\\n\\n<!-- prose-invert -->\\r\\n<!-- prose-li:marker:text-indigo-500  -->\\r\\n<!-- prose-img:rounded-md  important 导致 border-radius 无法覆盖-->\\r\\n<!-- rem px 混用了 -->\\r\\n<$list filter=\\\"[all[current]!is[system]]\\\">\\r\\n<$reveal tag=\\\"div\\\" class=\\\"prose prose-indigo text-[16px] max-w-none prose-img:my-0 prose-a:no-underline prose-h2:mt-4 prose-blockquote:not-italic dark:prose-invert dark:prose-pre:bg-transparent\\\" type=\\\"nomatch\\\" stateTitle=<<folded-state>> text=\\\"hide\\\" retain=\\\"yes\\\" animate=\\\"yes\\\">\\n\\n<$transclude tiddler={{{ [<currentTiddler>] :cascade[all[shadows+tiddlers]tag[$:/tags/ViewTemplateBodyFilter]!is[draft]get[text]] :and[!is[blank]else[$:/core/ui/ViewTemplate/body/default]] }}} />\\n\\n</$reveal>\\r\\n</$list>\\r\\n\"},\"$:/core/ui/EditTemplate/title\":{\"title\":\"$:/core/ui/EditTemplate/title\",\"tags\":\"$:/tags/EditTemplate\",\"text\":\"\\\\whitespace trim\\n<$edit-text field=\\\"draft.title\\\" class=\\\"tc-titlebar tc-edit-texteditor bg-transparent focus:bg-[#F7F7F7] shadow-none placeholder:text-zinc-400 dark:bg-transparent caret-indigo-400\\\" focus=\\\"true\\\" tabindex={{$:/config/EditTabIndex}} placeholder=\\\"Title\\\"/>\\n\\n<$reveal state=\\\"!!draft.title\\\" type=\\\"nomatch\\\" text={{!!draft.of}} tag=\\\"div\\\">\\n\\n<$vars pattern=\\\"\\\"\\\"[\\\\|\\\\[\\\\]{}]\\\"\\\"\\\" bad-chars=\\\"\\\"\\\"`| [ ] { }`\\\"\\\"\\\">\\n\\n<$list filter=\\\"[all[current]regexp:draft.title<pattern>]\\\" variable=\\\"listItem\\\">\\n\\n<div class=\\\"tc-message-box\\\">\\n\\n{{$:/core/images/warning}}&#32;{{$:/language/EditTemplate/Title/BadCharacterWarning}}\\n\\n</div>\\n\\n</$list>\\n\\n</$vars>\\n\\n<$list filter=\\\"[{!!draft.title}!is[missing]]\\\" variable=\\\"listItem\\\">\\n\\n<div class=\\\"tc-message-box\\\">\\n\\n{{$:/core/images/warning}}&#32;{{$:/language/EditTemplate/Title/Exists/Prompt}}\\n\\n</div>\\n\\n</$list>\\n\\n<$list filter=\\\"[{!!draft.of}!is[missing]]\\\" variable=\\\"listItem\\\">\\n\\n<$vars fromTitle={{!!draft.of}} toTitle={{!!draft.title}}>\\n\\n<$checkbox tiddler=\\\"$:/config/RelinkOnRename\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"no\\\">&#32;{{$:/language/EditTemplate/Title/Relink/Prompt}}</$checkbox>\\n\\n<$tiddler tiddler=<<fromTitle>> >\\n\\n<$list filter=\\\"[relink:wouldchange<toTitle>limit[1]]\\\" variable=\\\"listItem\\\">\\n\\n<$vars stateTiddler=<<qualify \\\"$:/state/edit/references\\\">> >\\n\\n<$set\\n\\tname=\\\"prompt\\\"\\n\\tfilter=\\\"[relink:wouldchange<toTitle>relink:impossible<toTitle>]\\\"\\n\\tvalue=\\\"EditTemplate/Title/Impossibles/Prompt\\\"\\n\\temptyValue=\\\"EditTemplate/Title/References/Prompt\\\" >\\n<$reveal type=\\\"nomatch\\\" state=<<stateTiddler>> text=\\\"show\\\">\\n<$button set=<<stateTiddler>> setTo=\\\"show\\\" class=\\\"tc-btn-invisible\\\">\\n{{$:/core/images/right-arrow}}\\n&#32;\\n<$macrocall $name=lingo title=<<prompt>> />\\n</$button>\\n</$reveal>\\n<$reveal type=\\\"match\\\" state=<<stateTiddler>> text=\\\"show\\\">\\n<$button set=<<stateTiddler>> setTo=\\\"hide\\\" class=\\\"tc-btn-invisible\\\">\\n{{$:/core/images/down-arrow}}\\n&#32;\\n<$macrocall $name=lingo title=<<prompt>> />\\n</$button>\\n</$reveal>\\n</$set>\\n\\n<$reveal type=\\\"match\\\" state=<<stateTiddler>> text=\\\"show\\\">\\n<$list variable=\\\"listItem\\\" filter=\\\"[relink:wouldchange<toTitle>!title[$:/StoryList]sort[title]]\\\" template=\\\"$:/plugins/flibbles/relink/ui/ListItemTemplate\\\">\\n</$list>\\n</$reveal>\\n\\n</$vars>\\n\\n</$list>\\n\\n</$tiddler>\\n\\n</$vars>\\n\\n</$list>\\n\\n</$reveal>\\n\"},\"$:/plugins/oeyoews/tiddlywiki-daylight/startup.js\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-daylight/startup.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/tiddlywiki-daylight/startup.js\\ntype: application/javascript\\nmodule-type: startup\\n\\ndaylight module\\n\\\\*/\\n(function () {\\n  /*jslint node: true, browser: true */\\n  /*global $tw: false */\\n  'use strict';\\n\\n  exports.name = 'daylight-startup-hook';\\n  exports.platforms = ['browser'];\\n  exports.after = ['startup'];\\n  exports.synchronous = true;\\n  exports.startup = () => {\\n    const { checkModeListener, toggleMode } = require('./daylight-listener');\\n    checkModeListener();\\n    $tw.rootWidget.addEventListener('om-toggle-theme', toggleMode);\\n  };\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"startup\"},\"$:/plugins/oeyoews/tiddlywiki-daylight/body-transition\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-daylight/body-transition\",\"text\":\"<!-- tags: $:/tags/Stylesheet -->\\n\\n\\\\rules only filteredtranscludeinline transcludeinline macrodef macrocallinline\\n\\nhtml {\\r\\n  transition: 0.8s ease-in-out;\\r\\n  animation: expand 1s ease-in-out;\\r\\n}\"},\"$:/plugins/oeyoews/tiddlywiki-daylight/pagecontrol\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-daylight/pagecontrol\",\"list-before\":\"$:/core/ui/Buttons/more-page-actions\",\"description\":\"Toggle mode\",\"caption\":\"Toggle Mode\",\"tags\":\"$:/tags/PageControls\",\"text\":\"\\\\whitespace trim\\r\\n<$button tooltip=\\\"Toggle Mode\\\" aria-label=\\\"\\\" class=<<tv-config-toolbar-class>>>\\r\\n<$list filter=\\\"[<tv-config-toolbar-icons>match[yes]]\\\">\\r\\n<$daylight />\\r\\n</$list>\\r\\n<$list filter=\\\"[<tv-config-toolbar-text>match[yes]]\\\">\\r\\n<span class=\\\"tc-btn-text\\\">\\r\\n<$text text=\\\"\\\"/>\\r\\n</span>\\r\\n</$list>\\r\\n</$button>\\r\\n\"}}}"}