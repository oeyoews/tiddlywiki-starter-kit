{"title":"$:/plugins/oeyoews/image-observer","description":"image-observer","author":"oeyoews","version":"0.0.1","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"image-observer","meat#disabled":"yes","qrcode":"yes","created":"2023-12-29","dependents":"$:/plugins/oeyoews/tiddlywiki-tailwindcss-plus","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/image-observer/readme\":{\"title\":\"$:/plugins/oeyoews/image-observer/readme\",\"text\":\"## Usage\\n\\n```js\\nconst { observer } = new $tw.ImageObserver();\\n```\\n\\n## Motivation\\n\\n<!-- your plugin motivation, or why you write this plugin -->\\n\",\"type\":\"text/markdown\",\"description\":\"image-observer\"},\"$:/plugins/oeyoews/image-observer/twimageobserver.js\":{\"title\":\"$:/plugins/oeyoews/image-observer/twimageobserver.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/image-observer/twimageobserver.js\\ntype: application/javascript\\nmodule-type: global\\n\\n\\\\*/\\nexports.ImageObserver=class{constructor(){this.dynamicClassed=\\\"scale-105 blur-md bg-black/10 cursor-wait\\\",this.dataSrc=\\\"data-src\\\",this.imageCallback=this.imageCallback.bind(this),this.imageCallbackOptions={root:null,rootMargin:\\\"0px\\\",threshold:.3},this.observer=new IntersectionObserver(this.imageCallback,this.imageCallbackOptions)}imageCallback(s,a){s.forEach((s=>{const t=s.target,i=t.getAttribute(this.dataSrc);t.classList.add(...this.dynamicClassed.split(\\\" \\\")),t.src=\\\"data:image/png;base64,iVBORw0...\\\",s.isIntersecting&&(t.src=i,t.onload=()=>{t.removeAttribute(this.dataSrc),t.classList.remove(...this.dynamicClassed.split(\\\" \\\")),t.classList.add(\\\"cursor-pointer\\\")},a.unobserve(t))}))}};\",\"type\":\"application/javascript\",\"module-type\":\"global\"}}}"}