---
title: '深浅拷贝'
tags: ['JavaScript']
type: 'text/markdown'
created: 'Sun Aug 27 2023 14:51:57 GMT+0000 (GMT)'
creator: 'oeyoews'
modifier: 'oeyoews'
---

# 深浅拷贝

浅拷贝和深拷贝是两种不同的对象复制方式，它们的区别在于拷贝的深度和引用关系。让我们详细了解一下它们的区别：

1. **浅拷贝（Shallow Copy）**：\

浅拷贝是创建一个新对象，将原始对象的属性值复制到新对象中。如果属性值是基本数据类型（例如数字、字符串、布尔值等），那么拷贝的是值本身。但如果属性值是引用类型（例如数组、对象、函数等），拷贝的是引用地址，新对象与原对象会共享同一个引用，因此对其中一个对象的修改会影响到另一个对象。

    示例：

```
```javascript
const originalArray = [1, 2, 3];
const shallowCopyArray = originalArray.slice();

originalArray[0] = 0;

console.log(shallowCopyArray); // Output: [1, 2, 3]
```

<button>javascript</button>
```

1. **深拷贝（Deep Copy）**：\

深拷贝是创建一个新对象，同时递归复制原始对象的所有属性和嵌套对象。这意味着新对象和原对象完全独立，不共享任何引用关系，即使嵌套属性也会被递归地复制。

    示例：

```
```javascript
const originalObject = { a: 1, b: { c: 2 } };
const deepCopyObject = JSON.parse(JSON.stringify(originalObject));

originalObject.b.c = 0;

console.log(deepCopyObject); // Output: { a: 1, b: { c: 2 } }
```

<button>javascript</button>
```

需要注意的是，深拷贝有一些限制。它无法正确地处理一些特殊类型，如函数、正则表达式、循环引用等。此外，深拷贝会在复制过程中创建大量的临时对象，可能会导致性能问题。因此，在选择拷贝方式时，需要根据具体情况进行权衡。

总结起来，浅拷贝只复制一层属性，深拷贝会递归复制所有嵌套属性，确保创建了一个完全独立的对象。

浅拷贝和深拷贝在不同的使用场景中具有不同的应用。让我们看看它们在实际开发中的一些常见用途：

**浅拷贝的使用场景：**

1. **快速复制：** 当你只需要复制一个对象的第一层属性时，浅拷贝是一个快速且有效的方法。

1. **性能优化：** 浅拷贝通常比深拷贝更快，因为它只复制了引用地址，而不是递归复制整个对象结构。在对性能要求较高的情况下，可以考虑使用浅拷贝。

1. **共享状态：** 如果你希望多个对象共享一部分相同的属性，浅拷贝可以实现这种共享。修改其中一个对象的属性会影响其他对象。

**深拷贝的使用场景：**

1. **独立性要求：** 当你需要创建一个与原对象完全独立的对象，且不希望修改一个对象对另一个对象产生影响时，深拷贝是必需的。

1. **递归属性：** 当对象中包含嵌套的对象或数组，而你需要递归地复制所有层级的属性时，深拷贝是唯一的选择。

1. **数据传递：** 在数据传递过程中，特别是在多层嵌套的数据结构中，使用深拷贝可以确保传递的数据保持独立性，不受外部影响。

1. **特殊数据类型：** 深拷贝可以正确地复制包括函数、正则表达式等特殊数据类型，而浅拷贝不能实现这些。

综上所述，根据你的具体需求，选择浅拷贝还是深拷贝是很重要的。浅拷贝适用于快速复制和性能优化，而深拷贝适用于创建独立的对象、处理递归属性和传递数据等情况。
