{
    "title": "$:/plugins/oeyoews/neotw-copy-code",
    "description": "Neotw Copy Code",
    "author": "oeyoews",
    "version": "0.0.2",
    "core-version": ">=5.2.5",
    "type": "application/json",
    "plugin-type": "plugin",
    "name": "Neotw Copy Code",
    "dependents": "$:/plugins/oeyoews/tiddlywiki-tailwindcss-plus",
    "list": "readme explore",
    "text": "{\"tiddlers\":{\"clipboard.min.js\":{\"text\":\"/*!\\n * clipboard.js v2.0.11\\n * https://clipboardjs.com/\\n *\\n * Licensed MIT ¬© Zeno Rocha\\n */\\n!function(t,e){\\\"object\\\"==typeof exports&&\\\"object\\\"==typeof module?module.exports=e():\\\"function\\\"==typeof define&&define.amd?define([],e):\\\"object\\\"==typeof exports?exports.ClipboardJS=e():t.ClipboardJS=e()}(this,function(){return n={686:function(t,e,n){\\\"use strict\\\";n.d(e,{default:function(){return b}});var e=n(279),i=n.n(e),e=n(370),u=n.n(e),e=n(817),r=n.n(e);function c(t){try{return document.execCommand(t)}catch(t){return}}var a=function(t){t=r()(t);return c(\\\"cut\\\"),t};function o(t,e){var n,o,t=(n=t,o=\\\"rtl\\\"===document.documentElement.getAttribute(\\\"dir\\\"),(t=document.createElement(\\\"textarea\\\")).style.fontSize=\\\"12pt\\\",t.style.border=\\\"0\\\",t.style.padding=\\\"0\\\",t.style.margin=\\\"0\\\",t.style.position=\\\"absolute\\\",t.style[o?\\\"right\\\":\\\"left\\\"]=\\\"-9999px\\\",o=window.pageYOffset||document.documentElement.scrollTop,t.style.top=\\\"\\\".concat(o,\\\"px\\\"),t.setAttribute(\\\"readonly\\\",\\\"\\\"),t.value=n,t);return e.container.appendChild(t),e=r()(t),c(\\\"copy\\\"),t.remove(),e}var f=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{container:document.body},n=\\\"\\\";return\\\"string\\\"==typeof t?n=o(t,e):t instanceof HTMLInputElement&&![\\\"text\\\",\\\"search\\\",\\\"url\\\",\\\"tel\\\",\\\"password\\\"].includes(null==t?void 0:t.type)?n=o(t.value,e):(n=r()(t),c(\\\"copy\\\")),n};function l(t){return(l=\\\"function\\\"==typeof Symbol&&\\\"symbol\\\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\\\"function\\\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\\\"symbol\\\":typeof t})(t)}var s=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.action,n=void 0===e?\\\"copy\\\":e,o=t.container,e=t.target,t=t.text;if(\\\"copy\\\"!==n&&\\\"cut\\\"!==n)throw new Error('Invalid \\\"action\\\" value, use either \\\"copy\\\" or \\\"cut\\\"');if(void 0!==e){if(!e||\\\"object\\\"!==l(e)||1!==e.nodeType)throw new Error('Invalid \\\"target\\\" value, use a valid Element');if(\\\"copy\\\"===n&&e.hasAttribute(\\\"disabled\\\"))throw new Error('Invalid \\\"target\\\" attribute. Please use \\\"readonly\\\" instead of \\\"disabled\\\" attribute');if(\\\"cut\\\"===n&&(e.hasAttribute(\\\"readonly\\\")||e.hasAttribute(\\\"disabled\\\")))throw new Error('Invalid \\\"target\\\" attribute. You can\\\\'t cut text from elements with \\\"readonly\\\" or \\\"disabled\\\" attributes')}return t?f(t,{container:o}):e?\\\"cut\\\"===n?a(e):f(e,{container:o}):void 0};function p(t){return(p=\\\"function\\\"==typeof Symbol&&\\\"symbol\\\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\\\"function\\\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\\\"symbol\\\":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\\\"value\\\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(n){var o=function(){if(\\\"undefined\\\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\\\"function\\\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=v(n);return t=o?(t=v(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||\\\"object\\\"!==p(t)&&\\\"function\\\"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\")}(e):t}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){t=\\\"data-clipboard-\\\".concat(t);if(e.hasAttribute(t))return e.getAttribute(t)}var b=function(){!function(t,e){if(\\\"function\\\"!=typeof e&&null!==e)throw new TypeError(\\\"Super expression must either be null or a function\\\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(r,i());var t,e,n,o=h(r);function r(t,e){var n;return function(t){if(!(t instanceof r))throw new TypeError(\\\"Cannot call a class as a function\\\")}(this),(n=o.call(this)).resolveOptions(e),n.listenClick(t),n}return t=r,n=[{key:\\\"copy\\\",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{container:document.body};return f(t,e)}},{key:\\\"cut\\\",value:function(t){return a(t)}},{key:\\\"isSupported\\\",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[\\\"copy\\\",\\\"cut\\\"],t=\\\"string\\\"==typeof t?[t]:t,e=!!document.queryCommandSupported;return t.forEach(function(t){e=e&&!!document.queryCommandSupported(t)}),e}}],(e=[{key:\\\"resolveOptions\\\",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action=\\\"function\\\"==typeof t.action?t.action:this.defaultAction,this.target=\\\"function\\\"==typeof t.target?t.target:this.defaultTarget,this.text=\\\"function\\\"==typeof t.text?t.text:this.defaultText,this.container=\\\"object\\\"===p(t.container)?t.container:document.body}},{key:\\\"listenClick\\\",value:function(t){var e=this;this.listener=u()(t,\\\"click\\\",function(t){return e.onClick(t)})}},{key:\\\"onClick\\\",value:function(t){var e=t.delegateTarget||t.currentTarget,n=this.action(e)||\\\"copy\\\",t=s({action:n,container:this.container,target:this.target(e),text:this.text(e)});this.emit(t?\\\"success\\\":\\\"error\\\",{action:n,text:t,trigger:e,clearSelection:function(){e&&e.focus(),window.getSelection().removeAllRanges()}})}},{key:\\\"defaultAction\\\",value:function(t){return m(\\\"action\\\",t)}},{key:\\\"defaultTarget\\\",value:function(t){t=m(\\\"target\\\",t);if(t)return document.querySelector(t)}},{key:\\\"defaultText\\\",value:function(t){return m(\\\"text\\\",t)}},{key:\\\"destroy\\\",value:function(){this.listener.destroy()}}])&&d(t.prototype,e),n&&d(t,n),r}()},828:function(t){var e;\\\"undefined\\\"==typeof Element||Element.prototype.matches||((e=Element.prototype).matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector),t.exports=function(t,e){for(;t&&9!==t.nodeType;){if(\\\"function\\\"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},438:function(t,e,n){var u=n(828);function i(t,e,n,o,r){var i=function(e,n,t,o){return function(t){t.delegateTarget=u(t.target,n),t.delegateTarget&&o.call(e,t)}}.apply(this,arguments);return t.addEventListener(n,i,r),{destroy:function(){t.removeEventListener(n,i,r)}}}t.exports=function(t,e,n,o,r){return\\\"function\\\"==typeof t.addEventListener?i.apply(null,arguments):\\\"function\\\"==typeof n?i.bind(null,document).apply(null,arguments):(\\\"string\\\"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return i(t,e,n,o,r)}))}},879:function(t,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&(\\\"[object NodeList]\\\"===e||\\\"[object HTMLCollection]\\\"===e)&&\\\"length\\\"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return\\\"string\\\"==typeof t||t instanceof String},n.fn=function(t){return\\\"[object Function]\\\"===Object.prototype.toString.call(t)}},370:function(t,e,n){var f=n(879),l=n(438);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error(\\\"Missing required arguments\\\");if(!f.string(e))throw new TypeError(\\\"Second argument must be a String\\\");if(!f.fn(n))throw new TypeError(\\\"Third argument must be a Function\\\");if(f.node(t))return c=e,a=n,(u=t).addEventListener(c,a),{destroy:function(){u.removeEventListener(c,a)}};if(f.nodeList(t))return o=t,r=e,i=n,Array.prototype.forEach.call(o,function(t){t.addEventListener(r,i)}),{destroy:function(){Array.prototype.forEach.call(o,function(t){t.removeEventListener(r,i)})}};if(f.string(t))return t=t,e=e,n=n,l(document.body,t,e,n);throw new TypeError(\\\"First argument must be a String, HTMLElement, HTMLCollection, or NodeList\\\");var o,r,i,u,c,a}},817:function(t){t.exports=function(t){var e,n=\\\"SELECT\\\"===t.nodeName?(t.focus(),t.value):\\\"INPUT\\\"===t.nodeName||\\\"TEXTAREA\\\"===t.nodeName?((e=t.hasAttribute(\\\"readonly\\\"))||t.setAttribute(\\\"readonly\\\",\\\"\\\"),t.select(),t.setSelectionRange(0,t.value.length),e||t.removeAttribute(\\\"readonly\\\"),t.value):(t.hasAttribute(\\\"contenteditable\\\")&&t.focus(),n=window.getSelection(),(e=document.createRange()).selectNodeContents(t),n.removeAllRanges(),n.addRange(e),n.toString());return n}},279:function(t){function e(){}e.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var o=this;function r(){o.off(t,r),e.apply(n,arguments)}return r._=e,this.on(t,r,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,r=n.length;o<r;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],r=[];if(o&&e)for(var i=0,u=o.length;i<u;i++)o[i].fn!==e&&o[i].fn._!==e&&r.push(o[i]);return r.length?n[t]=r:delete n[t],this}},t.exports=e,t.exports.TinyEmitter=e}},r={},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,{a:e}),e},o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o(686).default;function o(t){if(r[t])return r[t].exports;var e=r[t]={exports:{}};return n[t](e,e.exports,o),e.exports}var n,r});\",\"title\":\"clipboard.min.js\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-copy-code/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-copy-code/readme\",\"text\":\"<div class=\\\"prose max-w-none\\\">\\n\\n!! Neotw Copy Code\\n\\n* [[Source|https://github.com/oeyoews/neotw/tree/main/plugins/oeyoews/neotw-copy-code]]\\n* [[Demo|https://oeyoews.github.io/neotw]]\\n\\nThis plugin is designed to add a copy code button to code blocks in TiddlyWiki, making it easier to copy code snippets with their formatting and indentation intact. In TiddlyWiki, code blocks are typically wrapped in the `<pre>` tag to preserve their formatting and indentation. However, copying the code manually can be inconvenient.\\n\\nThis plugin solves this problem by adding a ‚ÄúCopy Code‚Äù button next to the code block. Clicking the button copies the code to the clipboard, and the copied code is also displayed in a popup using the SweetAlert2 plugin, making it easy to verify that the code was copied successfully.\\n\\nThis plugin can greatly improve the efficiency and convenience of displaying and sharing code in TiddlyWiki, especially when you need to copy code frequently.\\n\\nThe only downside at the moment is that the copy button needs to be manually triggered for display.\\n\\n!! Example\\n\\n<$button message=\\\"om-copy-code\\\" >\\n<$action-sendmessage $message=\\\"om-confetti-launch\\\" />\\n<$action-sendmessage $message=\\\"om-sound\\\" />\\n{{$:/plugins/oeyoews/neotw-copy-code/icon}} Click to show copy code button\\n</$button>\\n\\n```python\\n# Hello World program in Python\\nprint(\\\"Hello, World!\\\")\\n```\\n\\n```java\\n// Hello World program in Java\\npublic class HelloWorld {\\n    public static void main(String[] args) {\\n        System.out.println(\\\"Hello, World!\\\");\\n    }\\n}\\n```\\n\\n```javascript\\n// Hello World program in JavaScript\\nconsole.log(\\\"Hello, World!\\\");\\n```\\n\\n```c\\n/* Hello World program in C */\\n#include <stdio.h>\\nint main() {\\n    printf(\\\"Hello, World!\\\");\\n    return 0;\\n}\\n```\\n\\n```cpp\\n// Hello World program in C++\\n#include <iostream>\\nint main() {\\n    std::cout << \\\"Hello, World!\\\";\\n    return 0;\\n}\\n```\\n\\n```ruby\\n# Hello World program in Ruby\\nputs \\\"Hello, World!\\\"\\n```\\n\\n```php\\n<?php\\n// Hello World program in PHP\\necho \\\"Hello, World!\\\";\\n?>\\n```\\n\\n```swift\\n// Hello World program in Swift\\nprint(\\\"Hello, World!\\\")\\n```\\n\\n```go\\n// Hello World program in Go\\npackage main\\nimport \\\"fmt\\\"\\nfunc main() {\\n    fmt.Println(\\\"Hello, World!\\\")\\n}\\n```\\n\\n```kotlin\\n// Hello World program in Kotlin\\nfun main() {\\n    println(\\\"Hello, World!\\\")\\n}\\n```\\n\\n!! TODO\\n\\n<!-- * update copied icon -->\\n<!-- * add viewtoolbar not pagecontrol -->\\n<!-- * support hover scroll for code preview -->\\n<!-- * update style for button -->\\n<!-- * add hover style -->\\n* make preview is optional\\n* add transform style\\n* update plugin dependencies\\n\\n* copy code to image\\n* support copy image to clipboard\\n\\n</div>\\n\\n!! Performace\\n\\n* lazy load button\\n\"},\"$:/plugins/oeyoews/neotw-copy-code/copyCode.js\":{\"title\":\"$:/plugins/oeyoews/neotw-copy-code/copyCode.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-copy-code/copyCode.js\\ntype: application/javascript\\nmodule-type: library\\nneotw-copy-code widget\\n\\n\\\\*/\\nconst ClipboardJS = require('clipboard.min.js');\\n\\nfunction addCopyButton() {\\n  const codeBlocks = document.querySelectorAll('pre');\\n  codeBlocks.forEach(codeBlock => {\\n    const existingButton = codeBlock.querySelector('.copy-button');\\n    const codeElement = codeBlock.querySelector('code');\\n    const fileType = codeElement?.className.split(' ')[0] ?? null;\\n    if (existingButton && codeElement) {\\n      existingButton.remove();\\n    } else {\\n      const copyButton = document.createElement('button');\\n      copyButton.textContent = fileType ? `${fileType} üìã` : 'üìã';\\n      copyButton.classList.add(\\n        'copy-button',\\n        'float-right',\\n        'hover:bg-gray-200',\\n        'transition',\\n        'duration-200',\\n      );\\n      copyButton.setAttribute('title', 'Copy code');\\n\\n      const clipboard = new ClipboardJS(copyButton, {\\n        text: () => codeElement.textContent,\\n      });\\n\\n      clipboard.on('success', e => {\\n        copyButton.textContent = '‚úÖ Copied!';\\n        setTimeout(() => {\\n          copyButton.textContent = fileType ? `${fileType} üìã` : 'üìã';\\n        }, 2000);\\n        e.clearSelection();\\n      });\\n\\n      /* clipboard.on('error', e => {\\n        console.error('Action:', e.action);\\n        console.error('Trigger:', e.trigger);\\n      }); */\\n\\n      codeElement?.parentNode?.insertBefore(copyButton, codeElement);\\n    }\\n  });\\n}\\n\\n// exports.addCopyButton = addCopyButton;\\nmodule.exports = {\\n  addCopyButton,\\n};\\n\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-copy-code/icon\":{\"title\":\"$:/plugins/oeyoews/neotw-copy-code/icon\",\"text\":\"<svg width=\\\"22pt\\\" height=\\\"22pt\\\" class=\\\"tc-image-zwi-clipboard tc-image-button\\\" viewBox=\\\"0 0 24 24\\\"><g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\"><path fill=\\\"#000\\\" fill-rule=\\\"nonzero\\\" d=\\\"M10,4.5 C10,4.77614237 9.77614237,5 9.5,5 C9.22385763,5 9,4.77614237 9,4.5 C9,3.67157288 9.67157288,3 10.5,3 L13.5,3 C14.3284271,3 15,3.67157288 15,4.5 C15,4.77614237 14.7761424,5 14.5,5 C14.2238576,5 14,4.77614237 14,4.5 C14,4.22385763 13.7761424,4 13.5,4 L10.5,4 C10.2238576,4 10,4.22385763 10,4.5 Z M7.5,4 C7.77614237,4 8,4.22385763 8,4.5 C8,4.77614237 7.77614237,5 7.5,5 C6.67157288,5 6,5.67157288 6,6.5 L6,18.5 C6,19.3284271 6.67157288,20 7.5,20 L16.5,20 C17.3284271,20 18,19.3284271 18,18.5 L18,6.5 C18,5.67157288 17.3284271,5 16.5,5 C16.2238576,5 16,4.77614237 16,4.5 C16,4.22385763 16.2238576,4 16.5,4 C17.8807119,4 19,5.11928813 19,6.5 L19,18.5 C19,19.8807119 17.8807119,21 16.5,21 L7.5,21 C6.11928813,21 5,19.8807119 5,18.5 L5,6.5 C5,5.11928813 6.11928813,4 7.5,4 Z\\\"/><path fill=\\\"#000\\\" fill-rule=\\\"nonzero\\\" d=\\\"M8.5 10C8.22385763 10 8 9.77614237 8 9.5 8 9.22385763 8.22385763 9 8.5 9L15.5 9C15.7761424 9 16 9.22385763 16 9.5 16 9.77614237 15.7761424 10 15.5 10L8.5 10zM8.5 13C8.22385763 13 8 12.7761424 8 12.5 8 12.2238576 8.22385763 12 8.5 12L15.5 12C15.7761424 12 16 12.2238576 16 12.5 16 12.7761424 15.7761424 13 15.5 13L8.5 13zM8.5 16C8.22385763 16 8 15.7761424 8 15.5 8 15.2238576 8.22385763 15 8.5 15L13.5 15C13.7761424 15 14 15.2238576 14 15.5 14 15.7761424 13.7761424 16 13.5 16L8.5 16z\\\"/></g></svg>\\n\",\"type\":\"text/vnd.tiddlywiki\"},\"$:/plugins/oeyoews/neotw-copy-code/snippets/neotw-copy-code\":{\"title\":\"$:/plugins/oeyoews/neotw-copy-code/snippets/neotw-copy-code\",\"caption\":\"neotw-copy-code Widget\",\"description\":\"Neotw Copy Code Widget\",\"tags\":\"$:/tags/TextEditor/Snippet\"},\"copyButton/startup.js\":{\"title\":\"copyButton/startup.js\",\"text\":\"/*\\\\\\ntitle: copyButton/startup.js\\ntype: application/javascript\\nmodule-type: startup\\n\\ncopyButton module\\n\\n\\\\*/\\n(function() {\\n  /*jslint node: true, browser: true */\\n  /*global $tw: false */\\n  'use strict';\\n\\n  exports.name = 'copyButton-startup-hook';\\n  exports.platforms = ['browser'];\\n  exports.after = ['load-modules'];\\n  exports.synchronous = true;\\n  exports.startup = () => {\\n    const {\\n      addCopyButton,\\n    } = require('$:/plugins/oeyoews/neotw-copy-code/copyCode.js');\\n    window.copyButton = addCopyButton;\\n    $tw.rootWidget.addEventListener('om-copy-code', () => {\\n      addCopyButton();\\n    });\\n  };\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"startup\"},\"$:/plugins/oeyoews/neotw-copy-code/ui\":{\"title\":\"$:/plugins/oeyoews/neotw-copy-code/ui\",\"tags\":\"$:/tags/PageControls\",\"list-before\":\"\",\"description\":\"copy code button\",\"caption\":\"Copy Button\",\"text\":\"\\\\whitespace trim\\n<$button message=\\\"om-copy-code\\\" tooltip=\\\"Copy Code\\\" aria-label=\\\"copy\\\" class=<<tv-config-toolbar-class>>>\\n<!-- <$action-sendmessage $message=\\\"om-confetti-launch\\\"/> -->\\n<!-- <$action-sendmessage $message=\\\"om-sound\\\"/> -->\\n<$list filter=\\\"[<tv-config-toolbar-icons>match[yes]]\\\">\\n{{$:/plugins/oeyoews/neotw-copy-code/icon}}\\n</$list>\\n<$list filter=\\\"[<tv-config-toolbar-text>match[yes]]\\\">\\n<span class=\\\"tc-btn-text\\\">\\n<$text text=\\\"Copy\\\"/>\\n</span>\\n</$list>\\n</$button>\\n\"}}}"
}