{
    "title": "$:/plugins/oeyoews/motion",
    "name": "motion",
    "description": "Vim-like keyboard shortcuts for TiddlyWiki",
    "author": "oeyoews",
    "version": "0.3.45",
    "core-version": ">=5.2.5",
    "source": "https://github.com/oeyoews/neotw/plugins/tiddlywiki-motion",
    "plugin-type": "plugin",
    "dependents": "$:/plugins/oeyoews/tiddlywiki-tailwindcss",
    "list": "README",
    "type": "application/json",
    "text": "{\"tiddlers\":{\"$:/plugins/oeyoews/motion/README\":{\"title\":\"$:/plugins/oeyoews/motion/README\",\"text\":\"<div class=\\\"prose max-w-none\\\">\\n\\nVim-like keyboard shortcuts for TiddlyWiki. modified `based benwebber/motion`\\n\\n<hr>\\n\\n!! Usage\\n\\nPress <kbd>{{$:/plugins/oeyoews/motion/config/Shortcuts/ShowHelp/Key}}</kbd> to show keyboard shortcuts.\\n\\n!! NOTE\\n\\n* if your computer installed some vim extensions, such as surfing-keys or vimium, this plugin maybe not work\\n\\n!! TODO\\n\\n* suport create default markdown tiddler\\n* ss sr so\\n* 支持像素滚动\\n\\n```\\n // map multiple combinations to the same callback\\n    Mousetrap.bind(['command+k', 'ctrl+k'], function() {\\n        console.log('command k or control k');\\n\\n        // return false to prevent default browser behavior\\n        // and stop event from bubbling\\n        return false;\\n    });\\n```\\n\\n</div>\\n\"},\"$:/config/Search/AutoFocus\":{\"title\":\"$:/config/Search/AutoFocus\",\"text\":\"false\\n\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ShowFancybox/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ShowFancybox/Key\",\"text\":\"g b\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ShowFancybox/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ShowFancybox/Caption\",\"text\":\"show fancybox\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ShowCopyButton/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ShowCopyButton/Key\",\"text\":\"g m\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ShowCopyButton/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ShowCopyButton/Caption\",\"text\":\"Copy Code\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/FocusSearch/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/FocusSearch/Key\",\"text\":\"/\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/FocusSearch/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/FocusSearch/Caption\",\"text\":\"Focus search\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToSearch/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToSearch/Key\",\"text\":\"s\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToSearch/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToSearch/Caption\",\"text\":\"GoToSearch\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToControlPanel/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToControlPanel/Key\",\"text\":\"g i\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToControlPanel/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToControlPanel/Caption\",\"text\":\"GoToControlPanel\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToGettingStarted/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToGettingStarted/Key\",\"text\":\"g h\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToGettingStarted/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToGettingStarted/Caption\",\"text\":\"GoToGettingStarted\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/RefreshWiki/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/RefreshWiki/Key\",\"text\":\"g r\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/RefreshWiki/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/RefreshWiki/Caption\",\"text\":\"Refresh wiki\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ShowHelp/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ShowHelp/Key\",\"text\":\"?\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ShowHelp/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ShowHelp/Caption\",\"text\":\"Show this help message\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToPlugins/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToPlugins/Key\",\"text\":\"g p\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToPlugins/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToPlugins/Caption\",\"text\":\"Go to Plugins\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToInbox/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToInbox/Key\",\"text\":\"g I\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToInbox/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToInbox/Caption\",\"text\":\"Go to inbox\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/TogglePalette/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/TogglePalette/Key\",\"text\":\"g t\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/TogglePalette/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/TogglePalette/Caption\",\"text\":\"togglePalette\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleClockLayout/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleClockLayout/Key\",\"text\":\"g L\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleClockLayout/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleClockLayout/Caption\",\"text\":\"ToggleClockLayout\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleLayout/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleLayout/Key\",\"text\":\"g l\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleLayout/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleLayout/Caption\",\"text\":\"ToggleLayout\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleSidebar/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleSidebar/Key\",\"text\":\"g s\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleSidebar/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleSidebar/Caption\",\"text\":\"ToggleSidebar\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleOpen/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleOpen/Key\",\"text\":\"g o\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleOpen/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleOpen/Caption\",\"text\":\"ToggleOpen\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/Fullscreen/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/Fullscreen/Key\",\"text\":\"f\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/Fullscreen/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/Fullscreen/Caption\",\"text\":\"Fullscreen\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/CreateNewTiddler/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/CreateNewTiddler/Key\",\"text\":\"g n\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/CreateNewTiddler/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/CreateNewTiddler/Caption\",\"text\":\"Create a new tiddler\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/DeleteTiddler/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/DeleteTiddler/Key\",\"text\":\"d d\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/DeleteTiddler/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/DeleteTiddler/Caption\",\"text\":\"Delete selected tiddler\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToFirstTiddler/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToFirstTiddler/Key\",\"text\":\"g g\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToFirstTiddler/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToFirstTiddler/Caption\",\"text\":\"Go to first tiddler in story river\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToLastTiddler/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToLastTiddler/Key\",\"text\":\"G\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToLastTiddler/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/GoToLastTiddler/Caption\",\"text\":\"Go to last tiddler in story river\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/SelectNextTiddler/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/SelectNextTiddler/Key\",\"text\":\"j\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/SelectNextTiddler/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/SelectNextTiddler/Caption\",\"text\":\"Select next tiddler in story river\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/SelectPreviousTiddler/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/SelectPreviousTiddler/Key\",\"text\":\"k\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/SelectPreviousTiddler/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/SelectPreviousTiddler/Caption\",\"text\":\"Select previous tiddler in story river\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/EditTiddler/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/EditTiddler/Key\",\"text\":\"g e\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/EditTiddler/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/EditTiddler/Caption\",\"text\":\"Edit selected tiddler\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/CloseTiddler/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/CloseTiddler/Key\",\"text\":\"g c\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/CloseTiddler/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/CloseTiddler/Caption\",\"text\":\"Close selected tiddler\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/CloseAllTiddlers/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/CloseAllTiddlers/Key\",\"text\":\"g d\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/CloseAllTiddlers/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/CloseAllTiddlers/Caption\",\"text\":\"Close all tiddlers\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/FoldTiddler/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/FoldTiddler/Key\",\"text\":\"z c\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/FoldTiddler/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/FoldTiddler/Caption\",\"text\":\"Fold selected tiddler\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/UnfoldTiddler/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/UnfoldTiddler/Key\",\"text\":\"z o\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/UnfoldTiddler/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/UnfoldTiddler/Caption\",\"text\":\"Unfold selected tiddler\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleTiddler/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleTiddler/Key\",\"text\":\"z a\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleTiddler/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleTiddler/Caption\",\"text\":\"Toggle folding for selected tiddler\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/FoldAllTiddlers/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/FoldAllTiddlers/Key\",\"text\":\"z C\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/FoldAllTiddlers/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/FoldAllTiddlers/Caption\",\"text\":\"Fold all tiddlers\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/UnfoldAllTiddlers/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/UnfoldAllTiddlers/Key\",\"text\":\"z O\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/UnfoldAllTiddlers/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/UnfoldAllTiddlers/Caption\",\"text\":\"Unfold all tiddlers\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleAllTiddlers/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleAllTiddlers/Key\",\"text\":\"z A\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleAllTiddlers/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleAllTiddlers/Caption\",\"text\":\"Toggle folding for all tiddlers\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/Dismiss/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/Dismiss/Key\",\"text\":\"q\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/Dismiss/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/Dismiss/Caption\",\"text\":\"Dismiss selection\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/SaveWiki/Key\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/SaveWiki/Key\",\"text\":\"g w\"},\"$:/plugins/oeyoews/motion/config/Shortcuts/SaveWiki/Caption\":{\"title\":\"$:/plugins/oeyoews/motion/config/Shortcuts/SaveWiki/Caption\",\"text\":\"Save wiki\"},\"$:/plugins/oeyoews/motion/config/FocusSelected\":{\"title\":\"$:/plugins/oeyoews/motion/config/FocusSelected\",\"text\":\"true\"},\"$:/plugins/oeyoews/motion/modules/library/Motion.min.js\":{\"text\":\"class Motion {\\n  constructor() {\\n    this.prefix = '$:/plugins/oeyoews/motion';\\n    this.selectedStateTiddlerTitle = '$:/state/plugins/oeyoews/motion/selected';\\n  }\\n  init() {\\n    this.navigatorWidget = this.getNavigatorWidget($tw.rootWidget);\\n    $tw.hooks.addHook(\\n      'th-closing-tiddler',\\n      this.handleClosingTiddler.bind(this),\\n    );\\n    const shortcuts = {\\n      ShowHelp: () => {\\n        howler('click.mp3');\\n        this.navigatorWidget.dispatchEvent({\\n          type: 'tm-modal',\\n          param: this.getPluginTitle('Help'),\\n        });\\n        return false;\\n      },\\n      ShowFancybox: () => {\\n        this.navigatorWidget.dispatchEvent({ type: 'om-fancybox' });\\n        confetti();\\n        return false;\\n      },\\n      ShowCopyButton: () => {\\n        // howler('click.mp3');\\n        this.navigatorWidget.dispatchEvent({ type: 'om-copy-code' });\\n        // confetti();\\n        return false;\\n      },\\n      Fullscreen: () => {\\n        howler('click.mp3');\\n        this.navigatorWidget.dispatchEvent({ type: 'tm-full-screen' });\\n        return false;\\n      },\\n      FocusSearch: () => {\\n        this.navigatorWidget.dispatchEvent({\\n          type: 'tm-focus-selector',\\n          param: '.nc-topbar-wrapper input',\\n        });\\n        return false;\\n      },\\n      CreateNewTiddler: () => {\\n        const newTiddler = {\\n          title: '',\\n          text: '',\\n          type: 'text/markdown', // Set the content type to text/markdown\\n        };\\n        this.navigatorWidget.dispatchEvent({\\n          // param: 'template',\\n          type: 'tm-new-tiddler',\\n          paramObject: newTiddler, // Pass the new tiddler object as paramObject\\n        });\\n        return false;\\n      },\\n      DeleteTiddler: () => {\\n        howler('pop-down.mp3');\\n        let selectedTiddler =\\n          $tw.wiki.getTiddlerText(this.selectedStateTiddlerTitle) || '';\\n        if (!selectedTiddler) {\\n          return;\\n        }\\n        this.navigatorWidget.dispatchEvent({\\n          type: 'tm-delete-tiddler',\\n          param: selectedTiddler,\\n        });\\n        return false;\\n      },\\n      RefreshWiki: () => {\\n        this.navigatorWidget.dispatchEvent({\\n          type: 'tm-browser-refresh',\\n        });\\n        return false;\\n      },\\n      SaveWiki: () => {\\n        this.navigatorWidget.dispatchEvent({ type: 'tm-save-wiki' });\\n        return false;\\n      },\\n      SelectNextTiddler: () => {\\n        howler('click01.mp3');\\n        let selectedTiddler =\\n          $tw.wiki.getTiddlerText(this.selectedStateTiddlerTitle) || '';\\n        const storyList = this.navigatorWidget.story.getStoryList();\\n        if (!storyList.length) {\\n          return;\\n        }\\n        let currentTiddlerIndex = storyList.indexOf(selectedTiddler);\\n        let nextTiddlerIndex;\\n        if (currentTiddlerIndex < 0) {\\n          nextTiddlerIndex = 0;\\n        } else {\\n          nextTiddlerIndex = Math.min(\\n            currentTiddlerIndex + 1,\\n            storyList.length - 1,\\n          );\\n        }\\n        selectedTiddler = storyList[nextTiddlerIndex];\\n        $tw.wiki.addTiddler({\\n          title: this.selectedStateTiddlerTitle,\\n          text: selectedTiddler,\\n        });\\n        this.navigatorWidget.dispatchEvent({\\n          type: 'tm-navigate',\\n          navigateTo: selectedTiddler,\\n        });\\n        this.focusTiddler(selectedTiddler);\\n        return false;\\n      },\\n      SelectPreviousTiddler: () => {\\n        howler();\\n        let selectedTiddler =\\n          $tw.wiki.getTiddlerText(this.selectedStateTiddlerTitle) || '';\\n        const storyList = this.navigatorWidget.story.getStoryList();\\n        if (!storyList.length) {\\n          return;\\n        }\\n        let currentTiddlerIndex = storyList.indexOf(selectedTiddler);\\n        let nextTiddlerIndex;\\n        if (currentTiddlerIndex < 0) {\\n          nextTiddlerIndex = 0;\\n        } else {\\n          nextTiddlerIndex = Math.max(currentTiddlerIndex - 1, 0);\\n        }\\n        selectedTiddler = storyList[nextTiddlerIndex];\\n        $tw.wiki.addTiddler({\\n          title: this.selectedStateTiddlerTitle,\\n          text: selectedTiddler,\\n        });\\n        this.navigatorWidget.dispatchEvent({\\n          type: 'tm-navigate',\\n          navigateTo: selectedTiddler,\\n        });\\n        this.focusTiddler(selectedTiddler);\\n        return false;\\n      },\\n      GoToGettingStarted: () => {\\n        const gettingstarted = 'GettingStarted';\\n        this.navigatorWidget.dispatchEvent({\\n          type: 'tm-navigate',\\n          navigateTo: gettingstarted,\\n        });\\n        return false;\\n      },\\n      GoToPlugins: () => {\\n        this.navigatorWidget.dispatchEvent({\\n          type: 'tm-navigate',\\n          navigateTo: '$:/core/ui/ControlPanel/Plugins',\\n        });\\n        return false;\\n      },\\n      GoToSearch: () => {\\n        this.navigatorWidget.dispatchEvent({\\n          type: 'tm-navigate',\\n          navigateTo: '$:/AdvancedSearch',\\n        });\\n        return false;\\n      },\\n      GoToControlPanel: () => {\\n        const controlpanel = '$:/ControlPanel';\\n        this.navigatorWidget.dispatchEvent({\\n          type: 'tm-navigate',\\n          navigateTo: controlpanel,\\n        });\\n        return false;\\n      },\\n      GoToInbox: () => {\\n        const hasProjectify = $tw.wiki.getTiddler('$:/plugins/nico/projectify');\\n        const dashboard = '$:/plugins/nico/projectify/ui/dashboard/Dashboard';\\n        if (!hasProjectify) return;\\n        this.navigatorWidget.dispatchEvent({\\n          type: 'tm-navigate',\\n          navigateTo: dashboard,\\n        });\\n        this.focusTiddler(dashboard);\\n        return false;\\n      },\\n      GoToFirstTiddler: () => {\\n        howler();\\n        const storyList = this.navigatorWidget.story.getStoryList();\\n        if (!storyList.length) {\\n          return;\\n        }\\n        const selectedTiddler = storyList[0];\\n        $tw.wiki.addTiddler({\\n          title: this.selectedStateTiddlerTitle,\\n          text: selectedTiddler,\\n        });\\n        this.navigatorWidget.dispatchEvent({\\n          type: 'tm-navigate',\\n          navigateTo: selectedTiddler,\\n        });\\n        this.focusTiddler(selectedTiddler);\\n        return false;\\n      },\\n      GoToLastTiddler: () => {\\n        howler('click01.mp3');\\n        const storyList = this.navigatorWidget.story.getStoryList();\\n        if (!storyList.length) {\\n          return;\\n        }\\n        const selectedTiddler = storyList[storyList.length - 1];\\n        $tw.wiki.addTiddler({\\n          title: this.selectedStateTiddlerTitle,\\n          text: selectedTiddler,\\n        });\\n        this.navigatorWidget.dispatchEvent({\\n          type: 'tm-navigate',\\n          navigateTo: selectedTiddler,\\n        });\\n        this.focusTiddler(selectedTiddler);\\n        return false;\\n      },\\n      EditTiddler: () => {\\n        const selectedTiddler = $tw.wiki.getTiddlerText(\\n          this.selectedStateTiddlerTitle,\\n        );\\n        if (!selectedTiddler) {\\n          return;\\n        }\\n        this.navigatorWidget.dispatchEvent({\\n          type: 'tm-edit-tiddler',\\n          param: selectedTiddler,\\n        });\\n        return false;\\n      },\\n      CloseTiddler: () => {\\n        const selectedTiddler = $tw.wiki.getTiddlerText(\\n          this.selectedStateTiddlerTitle,\\n        );\\n        if (!selectedTiddler) {\\n          return;\\n        }\\n        this.navigatorWidget.dispatchEvent({\\n          type: 'tm-close-tiddler',\\n          param: selectedTiddler,\\n        });\\n        return false;\\n      },\\n      CloseAllTiddlers: () => {\\n        this.navigatorWidget.dispatchEvent({ type: 'tm-close-all-tiddlers' });\\n        return false;\\n      },\\n      TogglePalette: () => {\\n        const currentPalette = $tw.wiki.getTiddlerText('$:/palette');\\n        const notebookPalette =\\n          '$:/themes/nico/notebook/palettes/palette-beige';\\n        const githubDark = '$:/palettes/GithubDark';\\n        if (currentPalette == notebookPalette) {\\n          // dark\\n          setTheme('dark');\\n          $tw.wiki.setText('$:/palette', 'text', null, githubDark);\\n        }\\n        if (currentPalette == githubDark) {\\n          setTheme('light');\\n          $tw.wiki.setText('$:/palette', 'text', null, notebookPalette);\\n        }\\n        return false;\\n      },\\n      ToggleTiddler: () => {\\n        const selectedTiddler = $tw.wiki.getTiddlerText(\\n          this.selectedStateTiddlerTitle,\\n        );\\n        if (!selectedTiddler) {\\n          return;\\n        }\\n        this.toggleTiddler(selectedTiddler);\\n        return false;\\n      },\\n      UnfoldTiddler: () => {\\n        const selectedTiddler = $tw.wiki.getTiddlerText(\\n          this.selectedStateTiddlerTitle,\\n        );\\n        if (!selectedTiddler) {\\n          return;\\n        }\\n        this.unfoldTiddler(selectedTiddler);\\n        return false;\\n      },\\n      FoldTiddler: () => {\\n        const selectedTiddler = $tw.wiki.getTiddlerText(\\n          this.selectedStateTiddlerTitle,\\n        );\\n        if (!selectedTiddler) {\\n          return;\\n        }\\n        this.foldTiddler(selectedTiddler);\\n        return false;\\n      },\\n      ToggleClockLayout: () => {\\n        this.toggleLayout('$:/plugins/oeyoews/neotw/modules/clock/layout');\\n        return false;\\n      },\\n      ToggleLayout: () => {\\n        this.toggleLayout('$:/plugins/oeyoews/neotw/modules/landing/layout');\\n        return false;\\n      },\\n      // toggle sidebar\\n      ToggleSidebar: () => {\\n        howler();\\n        this.toggleSidebar();\\n        return false;\\n      },\\n      ToggleOpen: () => {\\n        this.toggleSidebar('Open');\\n        return false;\\n      },\\n      ToggleAllTiddlers: () => {\\n        const storyList = this.navigatorWidget.story.getStoryList();\\n        for (const title of storyList) {\\n          this.toggleTiddler(title);\\n        }\\n        return false;\\n      },\\n      FoldAllTiddlers: () => {\\n        const storyList = this.navigatorWidget.story.getStoryList();\\n        for (const title of storyList) {\\n          this.foldTiddler(title);\\n        }\\n        return false;\\n      },\\n      UnfoldAllTiddlers: () => {\\n        const storyList = this.navigatorWidget.story.getStoryList();\\n        for (const title of storyList) {\\n          this.unfoldTiddler(title);\\n        }\\n        return false;\\n      },\\n      // TODO should use keypress, not keydown\\n      Dismiss: () => {\\n        // Close help modal if it's open.\\n        // HACK: Close the modal by clicking the button to dispatch the internal\\n        // tm-close-tiddler message.\\n        const button = document.querySelector('.tc-modal-footer button');\\n        if (button) {\\n          button.click();\\n          howler();\\n        }\\n        // Deselect tiddler.\\n        $tw.wiki.deleteTiddler(this.selectedStateTiddlerTitle);\\n      },\\n    };\\n    for (const [name, handler] of Object.entries(shortcuts)) {\\n      const shortcut = this.getSetting(`Shortcuts/${name}/Key`);\\n      Mousetrap.bind(shortcut, handler);\\n    }\\n  } // int end\\n  /* some aid method */\\n  getSetting(name) {\\n    return $tw.wiki.getTiddlerText(this.getPluginTitle(`config/${name}`));\\n  }\\n  getPluginTitle(title) {\\n    return `${this.prefix}/${title}`;\\n  }\\n  handleClosingTiddler(event) {\\n    const selectedTiddler = $tw.wiki.getTiddlerText(\\n      this.selectedStateTiddlerTitle,\\n    );\\n    if (event.param == selectedTiddler) {\\n      $tw.wiki.deleteTiddler(this.selectedStateTiddlerTitle);\\n    }\\n    return event;\\n  }\\n  toggleTiddler(title) {\\n    if ($tw.wiki.getTiddlerText(`$:/state/folded/${title}`) == 'hide') {\\n      this.unfoldTiddler(title);\\n    } else {\\n      this.foldTiddler(title);\\n    }\\n  }\\n  foldTiddler(title) {\\n    $tw.wiki.setText(`$:/state/folded/${title}`, 'text', null, 'hide');\\n  }\\n  unfoldTiddler(title) {\\n    $tw.wiki.deleteTiddler(`$:/state/folded/${title}`);\\n  }\\n  toggleLayout(\\n    targetLayout = '$:/plugins/oeyoews/neotw/modules/landing/layout',\\n  ) {\\n    const layout = $tw.wiki.getTiddlerText('$:/layout');\\n    const vanillaLayout = '$:/core/ui/PageTemplate';\\n    if (layout == vanillaLayout) {\\n      $tw.wiki.setText('$:/layout', 'text', null, targetLayout);\\n    }\\n    if (layout == targetLayout) {\\n      $tw.wiki.setText('$:/layout', 'text', null, vanillaLayout);\\n    }\\n  }\\n  // toggle notebook-sidebar\\n  toggleSidebar(session = 'Recent') {\\n    if ($tw.wiki.getTiddlerText(`$:/state/notebook-sidebar`) == 'yes') {\\n      $tw.wiki.setText(`$:/state/notebook-sidebar`, 'text', null, 'no');\\n    } else {\\n      $tw.wiki.setText(`$:/state/notebook-sidebar`, 'text', null, 'yes');\\n      $tw.wiki.setText(\\n        `$:/state/notebook-sidebar-section`,\\n        'text',\\n        null,\\n        '$:/core/ui/SideBar/' + session,\\n      );\\n    }\\n  }\\n  getNavigatorWidget(widget) {\\n    const child = widget.children[0];\\n    if (child.parseTreeNode.type == 'navigator') {\\n      return child;\\n    }\\n    return this.getNavigatorWidget(child);\\n  }\\n  getTiddlerElement(title) {\\n    return document.querySelector(\\n      `[data-tiddler-title=\\\"${CSS.escape(title)}\\\"]`,\\n    );\\n  }\\n  focusTiddler(title) {\\n    const focusedTitle = this.getTiddlerElement(title);\\n    const focusSelected = this.getSetting('FocusSelected');\\n    if (focusedTitle && focusSelected === 'true') {\\n      focusedTitle.tabIndex = -1;\\n      focusedTitle.focus();\\n    }\\n  }\\n}\\n\\nmodule.exports = Motion;\\n\",\"title\":\"$:/plugins/oeyoews/motion/modules/library/Motion.min.js\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/motion/modules/library/mousetrap.min.js\":{\"text\":\"/* mousetrap v1.6.5 craig.is/killing/mice */\\n(function(q,u,c){function v(a,b,g){a.addEventListener?a.addEventListener(b,g,!1):a.attachEvent(\\\"on\\\"+b,g)}function z(a){if(\\\"keypress\\\"==a.type){var b=String.fromCharCode(a.which);a.shiftKey||(b=b.toLowerCase());return b}return n[a.which]?n[a.which]:r[a.which]?r[a.which]:String.fromCharCode(a.which).toLowerCase()}function F(a){var b=[];a.shiftKey&&b.push(\\\"shift\\\");a.altKey&&b.push(\\\"alt\\\");a.ctrlKey&&b.push(\\\"ctrl\\\");a.metaKey&&b.push(\\\"meta\\\");return b}function w(a){return\\\"shift\\\"==a||\\\"ctrl\\\"==a||\\\"alt\\\"==a||\\n\\\"meta\\\"==a}function A(a,b){var g,d=[];var e=a;\\\"+\\\"===e?e=[\\\"+\\\"]:(e=e.replace(/\\\\+{2}/g,\\\"+plus\\\"),e=e.split(\\\"+\\\"));for(g=0;g<e.length;++g){var m=e[g];B[m]&&(m=B[m]);b&&\\\"keypress\\\"!=b&&C[m]&&(m=C[m],d.push(\\\"shift\\\"));w(m)&&d.push(m)}e=m;g=b;if(!g){if(!p){p={};for(var c in n)95<c&&112>c||n.hasOwnProperty(c)&&(p[n[c]]=c)}g=p[e]?\\\"keydown\\\":\\\"keypress\\\"}\\\"keypress\\\"==g&&d.length&&(g=\\\"keydown\\\");return{key:m,modifiers:d,action:g}}function D(a,b){return null===a||a===u?!1:a===b?!0:D(a.parentNode,b)}function d(a){function b(a){a=\\na||{};var b=!1,l;for(l in p)a[l]?b=!0:p[l]=0;b||(x=!1)}function g(a,b,t,f,g,d){var l,E=[],h=t.type;if(!k._callbacks[a])return[];\\\"keyup\\\"==h&&w(a)&&(b=[a]);for(l=0;l<k._callbacks[a].length;++l){var c=k._callbacks[a][l];if((f||!c.seq||p[c.seq]==c.level)&&h==c.action){var e;(e=\\\"keypress\\\"==h&&!t.metaKey&&!t.ctrlKey)||(e=c.modifiers,e=b.sort().join(\\\",\\\")===e.sort().join(\\\",\\\"));e&&(e=f&&c.seq==f&&c.level==d,(!f&&c.combo==g||e)&&k._callbacks[a].splice(l,1),E.push(c))}}return E}function c(a,b,c,f){k.stopCallback(b,\\nb.target||b.srcElement,c,f)||!1!==a(b,c)||(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0)}function e(a){\\\"number\\\"!==typeof a.which&&(a.which=a.keyCode);var b=z(a);b&&(\\\"keyup\\\"==a.type&&y===b?y=!1:k.handleKey(b,F(a),a))}function m(a,g,t,f){function h(c){return function(){x=c;++p[a];clearTimeout(q);q=setTimeout(b,1E3)}}function l(g){c(t,g,a);\\\"keyup\\\"!==f&&(y=z(g));setTimeout(b,10)}for(var d=p[a]=0;d<g.length;++d){var e=d+1===g.length?l:h(f||\\nA(g[d+1]).action);n(g[d],e,f,a,d)}}function n(a,b,c,f,d){k._directMap[a+\\\":\\\"+c]=b;a=a.replace(/\\\\s+/g,\\\" \\\");var e=a.split(\\\" \\\");1<e.length?m(a,e,b,c):(c=A(a,c),k._callbacks[c.key]=k._callbacks[c.key]||[],g(c.key,c.modifiers,{type:c.action},f,a,d),k._callbacks[c.key][f?\\\"unshift\\\":\\\"push\\\"]({callback:b,modifiers:c.modifiers,action:c.action,seq:f,level:d,combo:a}))}var k=this;a=a||u;if(!(k instanceof d))return new d(a);k.target=a;k._callbacks={};k._directMap={};var p={},q,y=!1,r=!1,x=!1;k._handleKey=function(a,\\nd,e){var f=g(a,d,e),h;d={};var k=0,l=!1;for(h=0;h<f.length;++h)f[h].seq&&(k=Math.max(k,f[h].level));for(h=0;h<f.length;++h)f[h].seq?f[h].level==k&&(l=!0,d[f[h].seq]=1,c(f[h].callback,e,f[h].combo,f[h].seq)):l||c(f[h].callback,e,f[h].combo);f=\\\"keypress\\\"==e.type&&r;e.type!=x||w(a)||f||b(d);r=l&&\\\"keydown\\\"==e.type};k._bindMultiple=function(a,b,c){for(var d=0;d<a.length;++d)n(a[d],b,c)};v(a,\\\"keypress\\\",e);v(a,\\\"keydown\\\",e);v(a,\\\"keyup\\\",e)}if(q){var n={8:\\\"backspace\\\",9:\\\"tab\\\",13:\\\"enter\\\",16:\\\"shift\\\",17:\\\"ctrl\\\",\\n18:\\\"alt\\\",20:\\\"capslock\\\",27:\\\"esc\\\",32:\\\"space\\\",33:\\\"pageup\\\",34:\\\"pagedown\\\",35:\\\"end\\\",36:\\\"home\\\",37:\\\"left\\\",38:\\\"up\\\",39:\\\"right\\\",40:\\\"down\\\",45:\\\"ins\\\",46:\\\"del\\\",91:\\\"meta\\\",93:\\\"meta\\\",224:\\\"meta\\\"},r={106:\\\"*\\\",107:\\\"+\\\",109:\\\"-\\\",110:\\\".\\\",111:\\\"/\\\",186:\\\";\\\",187:\\\"=\\\",188:\\\",\\\",189:\\\"-\\\",190:\\\".\\\",191:\\\"/\\\",192:\\\"`\\\",219:\\\"[\\\",220:\\\"\\\\\\\\\\\",221:\\\"]\\\",222:\\\"'\\\"},C={\\\"~\\\":\\\"`\\\",\\\"!\\\":\\\"1\\\",\\\"@\\\":\\\"2\\\",\\\"#\\\":\\\"3\\\",$:\\\"4\\\",\\\"%\\\":\\\"5\\\",\\\"^\\\":\\\"6\\\",\\\"&\\\":\\\"7\\\",\\\"*\\\":\\\"8\\\",\\\"(\\\":\\\"9\\\",\\\")\\\":\\\"0\\\",_:\\\"-\\\",\\\"+\\\":\\\"=\\\",\\\":\\\":\\\";\\\",'\\\"':\\\"'\\\",\\\"<\\\":\\\",\\\",\\\">\\\":\\\".\\\",\\\"?\\\":\\\"/\\\",\\\"|\\\":\\\"\\\\\\\\\\\"},B={option:\\\"alt\\\",command:\\\"meta\\\",\\\"return\\\":\\\"enter\\\",\\nescape:\\\"esc\\\",plus:\\\"+\\\",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?\\\"meta\\\":\\\"ctrl\\\"},p;for(c=1;20>c;++c)n[111+c]=\\\"f\\\"+c;for(c=0;9>=c;++c)n[c+96]=c.toString();d.prototype.bind=function(a,b,c){a=a instanceof Array?a:[a];this._bindMultiple.call(this,a,b,c);return this};d.prototype.unbind=function(a,b){return this.bind.call(this,a,function(){},b)};d.prototype.trigger=function(a,b){if(this._directMap[a+\\\":\\\"+b])this._directMap[a+\\\":\\\"+b]({},a);return this};d.prototype.reset=function(){this._callbacks={};\\nthis._directMap={};return this};d.prototype.stopCallback=function(a,b){if(-1<(\\\" \\\"+b.className+\\\" \\\").indexOf(\\\" mousetrap \\\")||D(b,this.target))return!1;if(\\\"composedPath\\\"in a&&\\\"function\\\"===typeof a.composedPath){var c=a.composedPath()[0];c!==a.target&&(b=c)}return\\\"INPUT\\\"==b.tagName||\\\"SELECT\\\"==b.tagName||\\\"TEXTAREA\\\"==b.tagName||b.isContentEditable};d.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};d.addKeycodes=function(a){for(var b in a)a.hasOwnProperty(b)&&(n[b]=a[b]);p=null};\\n  d.init=function(){var a=d(u),b;for(b in a)\\\"_\\\"!==b.charAt(0)&&(d[b]=function(b){return function(){return a[b].apply(a,arguments)}}(b))};d.init();q.Mousetrap=d;\\\"undefined\\\"!==typeof module&&module.exports&&(module.exports=d);\\\"function\\\"===typeof define&&define.amd&&define(function(){return d})}})(\\\"undefined\\\"!==typeof window?window:null,\\\"undefined\\\"!==typeof window?document:null);\\n\",\"title\":\"$:/plugins/oeyoews/motion/modules/library/mousetrap.min.js\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/motion/modules/startup/motion.min.js\":{\"text\":\"(function () {\\n  'use strict';\\n  exports.platforms = ['browser'];\\n  exports.after = ['render'];\\n  exports.synchronous = true;\\n  exports.startup = () => {\\n    require('$:/plugins/oeyoews/motion/modules/library/mousetrap.min.js');\\n    const Motion = require('$:/plugins/oeyoews/motion/modules/library/Motion.min.js');\\n    new Motion().init();\\n  };\\n})();\\n\",\"title\":\"$:/plugins/oeyoews/motion/modules/startup/motion.min.js\",\"type\":\"application/javascript\",\"module-type\":\"startup\"},\"$:/plugins/oeyoews/motion/Help\":{\"title\":\"$:/plugins/oeyoews/motion/Help\",\"class\":\"motion-help o-tm\",\"subtitle\":\"Keyboard shortcuts {{$:/plugins/oeyoews/tiddlywiki-modal-ui/close-modal}}\",\"mask-closable\":\"yes\",\"text\":\"\\\\define shortcut(shortcut)\\n<$set name=kbd filter=\\\"[enlist:raw{$:/plugins/oeyoews/motion/config/Shortcuts/$shortcut$/Key}addprefix[<kbd>]addsuffix[</kbd>]]\\\">\\n<tr>\\n  <td class=\\\"border-2 p-1\\\"><<kbd>></td>\\n  <td class=\\\"border-2 p-1\\\"><$transclude tiddler=\\\"$:/plugins/oeyoews/motion/config/Shortcuts/$shortcut$/Caption\\\" /></td>\\n</tr>\\n</$set>\\n\\\\end\\n\\n<div class=\\\"grid grid-cols-2 gap-2\\\">\\n<table class=\\\"border-2\\\">\\n<$list filter=\\\"[enlist[Fullscreen ToggleSidebar GoToInbox RefreshWiki GoToGettingStarted GoToControlPanel GoToSearch ToggleLayout TogglePalette GoToPlugins]]\\\">\\n<$macrocall $name=\\\"shortcut\\\" shortcut=<<currentTiddler>> />\\n</$list>\\n</table>\\n\\n<table class=\\\"border-2\\\">\\n<$list filter=\\\"[enlist[FocusSearch ShowHelp Dismiss]]\\\">\\n<$macrocall $name=\\\"shortcut\\\" shortcut=<<currentTiddler>> />\\n</$list>\\n</table>\\n\\n<table class=\\\"border-2\\\">\\n<$list filter=\\\"[enlist[CreateNewTiddler SelectNextTiddler SelectPreviousTiddler GoToFirstTiddler GoToLastTiddler EditTiddler DeleteTiddler CloseTiddler CloseAllTiddlers]]\\\">\\n<$macrocall $name=\\\"shortcut\\\" shortcut=<<currentTiddler>> />\\n</$list>\\n</table>\\n\\n<table class=\\\"border-2\\\">\\n<$list filter=\\\"[enlist[FoldTiddler UnfoldTiddler ToggleTiddler FoldAllTiddlers UnfoldAllTiddlers ToggleAllTiddlers]]\\\">\\n<$macrocall $name=\\\"shortcut\\\" shortcut=<<currentTiddler>> />\\n</$list>\\n</table>\\n\\n</div>\\n\"},\"$:/plugins/oeyoews/motion/icon\":{\"title\":\"$:/plugins/oeyoews/motion/icon\",\"text\":\"<svg stroke=\\\"currentColor\\\" fill=\\\"#389BD2\\\" stroke-width=\\\"0\\\" viewBox=\\\"0 0 16 16\\\" height=\\\"1em\\\" width=\\\"1em\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M15.992 4.204c-.071 1.556-1.158 3.687-3.262 6.393-2.175 2.829-4.016 4.243-5.522 4.243-.933 0-1.722-.861-2.367-2.583L3.55 7.523C3.07 5.8 2.556 4.94 2.007 4.94c-.118 0-.537.253-1.254.754L0 4.724a209.56 209.56 0 0 0 2.334-2.081c1.054-.91 1.845-1.388 2.373-1.437 1.243-.123 2.01.728 2.298 2.553.31 1.968.526 3.19.646 3.666.36 1.631.756 2.446 1.186 2.445.334 0 .836-.53 1.508-1.587.671-1.058 1.03-1.863 1.077-2.415.096-.913-.263-1.37-1.077-1.37a3.022 3.022 0 0 0-1.185.261c.789-2.573 2.291-3.825 4.508-3.756 1.644.05 2.419 1.117 2.324 3.2z\\\"></path></svg>\\n\",\"type\":\"image/svg+xml\"},\"$:/plugins/oeyoews/motion/styles/dynamic\":{\"title\":\"$:/plugins/oeyoews/motion/styles/dynamic\",\"<!-- tags\":\"$:/tags/Stylesheet -->\",\"text\":\"<!-- not work -->\\n\\n<$list filter=\\\"[{$:/state/plugins/oeyoews/motion/selected}] [has[draft.of]field:draft.of{$:/state/plugins/oeyoews/motion/selected}] +[escapecss[]]\\\">\\n[data-tiddler-title=<<currentTiddler>>] {\\n  outline: <<colour primary>> 2px solid;\\n  border: red 2px solid;\\n}\\n</$list>\\n\"}}}"
}